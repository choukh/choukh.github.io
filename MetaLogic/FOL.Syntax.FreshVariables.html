<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>FOL.Syntax.FreshVariables</title>
  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/skylighting-solarized-theme.css" />
  <script type="text/javascript" src="highlight-hover.js"></script>
</head>
<body>

<header>
<h1 class="title"></h1>
<blockquote class="metadata">
</blockquote>
</header>

<nav id="TOC" role="doc-toc">
    <strong>Contents</strong><label for="contents">⊕</label>
  <input type="checkbox" id="contents">
  <ul>
  <li><a href="#一阶逻辑-语法-新变元与闭公式" id="toc-一阶逻辑-语法-新变元与闭公式">一阶逻辑 ▸ 语法 ▸ 新变元与闭公式</a>
  <ul>
  <li><a href="#新变元" id="toc-新变元">新变元</a></li>
  <li><a href="#闭公式" id="toc-闭公式">闭公式</a></li>
  <li><a href="#命题性" id="toc-命题性">命题性</a></li>
  </ul></li>
  </ul>
</nav>

<main>
<h1 id="一阶逻辑-语法-新变元与闭公式">一阶逻辑 ▸ 语法 ▸ 新变元与闭公式</h1>
<p>我们目前定义的公式较为宽泛, 实用上通常只需要一类称为<strong>闭公式 (closed formula)</strong> 的公式, 本篇将给出其定义.</p>
<pre class="Agda"><a id="131" class="Keyword">open</a> <a id="136" class="Keyword">import</a> <a id="143" href="Foundation.Essential.html" class="Module">Foundation.Essential</a>
<a id="164" class="Keyword">open</a> <a id="169" class="Keyword">import</a> <a id="176" href="Foundation.Data.Nat.Order.html" class="Module">Foundation.Data.Nat.Order</a>

<a id="203" class="Keyword">open</a> <a id="208" class="Keyword">import</a> <a id="215" href="FOL.Language.Base.html" class="Module">FOL.Language.Base</a>
<a id="233" class="Keyword">module</a> <a id="240" href="FOL.Syntax.FreshVariables.html" class="Module">FOL.Syntax.FreshVariables</a> <a id="266" class="Symbol">(</a><a id="267" href="FOL.Syntax.FreshVariables.html#267" class="Bound">ℒ</a> <a id="269" class="Symbol">:</a> <a id="271" href="FOL.Language.Base.html#786" class="Record">Language</a><a id="279" class="Symbol">)</a> <a id="281" class="Keyword">where</a>
<a id="287" class="Keyword">open</a> <a id="292" class="Keyword">import</a> <a id="299" href="FOL.Syntax.Base.html" class="Module">FOL.Syntax.Base</a> <a id="315" href="FOL.Syntax.FreshVariables.html#267" class="Bound">ℒ</a>

<a id="318" class="Keyword">private</a> <a id="326" class="Keyword">variable</a>
  <a id="337" href="FOL.Syntax.FreshVariables.html#337" class="Generalizable">m</a> <a id="339" href="FOL.Syntax.FreshVariables.html#339" class="Generalizable">n</a> <a id="341" class="Symbol">:</a> <a id="343" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
</pre>
<h2 id="新变元">新变元</h2>
<p><strong><u>归纳定义</u></strong> 我们说 <code>n</code> 是 <code>t</code> 的新变元 (或者说 <code>n</code> 在 <code>t</code> 中未使用), 当且仅当以下任一种情况成立</p>
<ul>
<li><code>t</code> 是变元 <code># m</code>, 且 <code>n ≢ m</code>.</li>
<li><code>t</code> 是函数应用 <code>f $̇ t⃗</code>, 且对于任意 <code>t ∈⃗ t⃗</code>, <code>n</code> 是 <code>t</code> 的新变元.</li>
</ul>
<pre class="Agda"><a id="523" class="Keyword">data</a> <a id="freshₜ"></a><a id="528" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="535" class="Symbol">(</a><a id="536" href="FOL.Syntax.FreshVariables.html#536" class="Bound">n</a> <a id="538" class="Symbol">:</a> <a id="540" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="541" class="Symbol">)</a> <a id="543" class="Symbol">:</a> <a id="545" href="FOL.Syntax.Base.html#731" class="Datatype">Term</a> <a id="550" class="Symbol">→</a> <a id="552" href="Agda.Primitive.html#388" class="Primitive">𝕋</a> <a id="554" class="Keyword">where</a>
  <a id="freshₜ.fresh#"></a><a id="562" href="FOL.Syntax.FreshVariables.html#562" class="InductiveConstructor">fresh#</a> <a id="569" class="Symbol">:</a> <a id="571" class="Symbol">∀</a> <a id="573" class="Symbol">{</a><a id="574" href="FOL.Syntax.FreshVariables.html#574" class="Bound">m</a><a id="575" class="Symbol">}</a> <a id="577" class="Symbol">→</a> <a id="579" href="FOL.Syntax.FreshVariables.html#536" class="Bound">n</a> <a id="581" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="583" href="FOL.Syntax.FreshVariables.html#574" class="Bound">m</a> <a id="585" class="Symbol">→</a> <a id="587" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="594" href="FOL.Syntax.FreshVariables.html#536" class="Bound">n</a> <a id="596" class="Symbol">(</a><a id="597" href="FOL.Syntax.Base.html#748" class="InductiveConstructor">#</a> <a id="599" href="FOL.Syntax.FreshVariables.html#574" class="Bound">m</a><a id="600" class="Symbol">)</a>
  <a id="freshₜ.fresh$̇"></a><a id="604" href="FOL.Syntax.FreshVariables.html#604" class="InductiveConstructor">fresh$̇</a> <a id="612" class="Symbol">:</a> <a id="614" class="Symbol">∀</a> <a id="616" class="Symbol">{</a><a id="617" href="FOL.Syntax.FreshVariables.html#617" class="Bound">f</a> <a id="619" href="FOL.Syntax.FreshVariables.html#619" class="Bound">t⃗</a><a id="621" class="Symbol">}</a> <a id="623" class="Symbol">→</a> <a id="625" class="Symbol">(∀</a> <a id="628" href="FOL.Syntax.FreshVariables.html#628" class="Bound">t</a> <a id="630" class="Symbol">→</a> <a id="632" href="FOL.Syntax.FreshVariables.html#628" class="Bound">t</a> <a id="634" href="Foundation.Essential.html#12199" class="Function Operator">∈⃗</a> <a id="637" href="FOL.Syntax.FreshVariables.html#619" class="Bound">t⃗</a> <a id="640" class="Symbol">→</a> <a id="642" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="649" href="FOL.Syntax.FreshVariables.html#536" class="Bound">n</a> <a id="651" href="FOL.Syntax.FreshVariables.html#628" class="Bound">t</a><a id="652" class="Symbol">)</a> <a id="654" class="Symbol">→</a> <a id="656" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="663" href="FOL.Syntax.FreshVariables.html#536" class="Bound">n</a> <a id="665" class="Symbol">(</a><a id="666" href="FOL.Syntax.FreshVariables.html#617" class="Bound">f</a> <a id="668" href="FOL.Syntax.Base.html#763" class="InductiveConstructor Operator">$̇</a> <a id="671" href="FOL.Syntax.FreshVariables.html#619" class="Bound">t⃗</a><a id="673" class="Symbol">)</a>

<a id="fresh#-elim"></a><a id="676" href="FOL.Syntax.FreshVariables.html#676" class="Function">fresh#-elim</a> <a id="688" class="Symbol">:</a> <a id="690" class="Symbol">∀</a> <a id="692" class="Symbol">{</a><a id="693" href="FOL.Syntax.FreshVariables.html#693" class="Bound">n</a> <a id="695" href="FOL.Syntax.FreshVariables.html#695" class="Bound">m</a><a id="696" class="Symbol">}</a> <a id="698" class="Symbol">→</a> <a id="700" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="707" href="FOL.Syntax.FreshVariables.html#693" class="Bound">n</a> <a id="709" class="Symbol">(</a><a id="710" href="FOL.Syntax.Base.html#748" class="InductiveConstructor">#</a> <a id="712" href="FOL.Syntax.FreshVariables.html#695" class="Bound">m</a><a id="713" class="Symbol">)</a> <a id="715" class="Symbol">→</a> <a id="717" href="FOL.Syntax.FreshVariables.html#693" class="Bound">n</a> <a id="719" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="721" href="FOL.Syntax.FreshVariables.html#695" class="Bound">m</a>
<a id="723" href="FOL.Syntax.FreshVariables.html#676" class="Function">fresh#-elim</a> <a id="735" class="Symbol">(</a><a id="736" href="FOL.Syntax.FreshVariables.html#562" class="InductiveConstructor">fresh#</a> <a id="743" href="FOL.Syntax.FreshVariables.html#743" class="Bound">p</a><a id="744" class="Symbol">)</a> <a id="746" class="Symbol">=</a> <a id="748" href="FOL.Syntax.FreshVariables.html#743" class="Bound">p</a>

<a id="fresh$̇-elim"></a><a id="751" href="FOL.Syntax.FreshVariables.html#751" class="Function">fresh$̇-elim</a> <a id="764" class="Symbol">:</a> <a id="766" class="Symbol">∀</a> <a id="768" class="Symbol">{</a><a id="769" href="FOL.Syntax.FreshVariables.html#769" class="Bound">n</a> <a id="771" href="FOL.Syntax.FreshVariables.html#771" class="Bound">f</a> <a id="773" href="FOL.Syntax.FreshVariables.html#773" class="Bound">t⃗</a><a id="775" class="Symbol">}</a> <a id="777" class="Symbol">→</a> <a id="779" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="786" href="FOL.Syntax.FreshVariables.html#769" class="Bound">n</a> <a id="788" class="Symbol">(</a><a id="789" href="FOL.Syntax.FreshVariables.html#771" class="Bound">f</a> <a id="791" class="InductiveConstructor Operator">$̇</a> <a id="794" href="FOL.Syntax.FreshVariables.html#773" class="Bound">t⃗</a><a id="796" class="Symbol">)</a> <a id="798" class="Symbol">→</a> <a id="800" class="Symbol">(∀</a> <a id="803" href="FOL.Syntax.FreshVariables.html#803" class="Bound">t</a> <a id="805" class="Symbol">→</a> <a id="807" href="FOL.Syntax.FreshVariables.html#803" class="Bound">t</a> <a id="809" href="Foundation.Essential.html#12199" class="Function Operator">∈⃗</a> <a id="812" href="FOL.Syntax.FreshVariables.html#773" class="Bound">t⃗</a> <a id="815" class="Symbol">→</a> <a id="817" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="824" href="FOL.Syntax.FreshVariables.html#769" class="Bound">n</a> <a id="826" href="FOL.Syntax.FreshVariables.html#803" class="Bound">t</a><a id="827" class="Symbol">)</a>
<a id="829" href="FOL.Syntax.FreshVariables.html#751" class="Function">fresh$̇-elim</a> <a id="842" class="Symbol">(</a><a id="843" href="FOL.Syntax.FreshVariables.html#604" class="InductiveConstructor">fresh$̇</a> <a id="851" href="FOL.Syntax.FreshVariables.html#851" class="Bound">p</a><a id="852" class="Symbol">)</a> <a id="854" class="Symbol">=</a> <a id="856" href="FOL.Syntax.FreshVariables.html#851" class="Bound">p</a>
</pre>
<p><strong><u>归纳定义</u></strong> 我们说 <code>n</code> 是 <code>φ</code> 的新变元 (或者说 <code>n</code> 在 <code>φ</code> 中未使用), 当且仅当以下任一种情况成立</p>
<ul>
<li><code>φ</code> 是恒假式 <code>⊥̇</code>.</li>
<li><code>φ</code> 是蕴含式 <code>φ →̇ ψ</code>, 且 <code>n</code> 是 <code>φ</code> 和 <code>ψ</code> 的新变元.</li>
<li><code>φ</code> 是全称量化式 <code>∀̇ φ</code>, 且 <code>suc n</code> 是 <code>φ</code> 的新变元.</li>
<li><code>φ</code> 是关系应用 <code>R $̇ t⃗</code>, 且 <code>n</code> 是任意 <code>t ∈⃗ t⃗</code> 的新变元.</li>
</ul>
<pre class="Agda"><a id="1098" class="Keyword">data</a> <a id="freshᵩ"></a><a id="1103" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1110" class="Symbol">(</a><a id="1111" href="FOL.Syntax.FreshVariables.html#1111" class="Bound">n</a> <a id="1113" class="Symbol">:</a> <a id="1115" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1116" class="Symbol">)</a> <a id="1118" class="Symbol">:</a> <a id="1120" href="FOL.Syntax.Base.html#3791" class="Datatype">Formula</a> <a id="1128" class="Symbol">→</a> <a id="1130" href="Agda.Primitive.html#388" class="Primitive">𝕋</a> <a id="1132" class="Keyword">where</a>
  <a id="freshᵩ.fresh⊥̇"></a><a id="1140" href="FOL.Syntax.FreshVariables.html#1140" class="InductiveConstructor">fresh⊥̇</a> <a id="1148" class="Symbol">:</a> <a id="1150" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1157" href="FOL.Syntax.FreshVariables.html#1111" class="Bound">n</a> <a id="1159" href="FOL.Syntax.Base.html#3811" class="InductiveConstructor">⊥̇</a>
  <a id="freshᵩ.fresh→̇"></a><a id="1164" href="FOL.Syntax.FreshVariables.html#1164" class="InductiveConstructor">fresh→̇</a> <a id="1172" class="Symbol">:</a> <a id="1174" class="Symbol">∀</a> <a id="1176" class="Symbol">{</a><a id="1177" href="FOL.Syntax.FreshVariables.html#1177" class="Bound">φ</a> <a id="1179" href="FOL.Syntax.FreshVariables.html#1179" class="Bound">ψ</a><a id="1180" class="Symbol">}</a> <a id="1182" class="Symbol">→</a> <a id="1184" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1191" href="FOL.Syntax.FreshVariables.html#1111" class="Bound">n</a> <a id="1193" href="FOL.Syntax.FreshVariables.html#1177" class="Bound">φ</a> <a id="1195" class="Symbol">→</a> <a id="1197" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1204" href="FOL.Syntax.FreshVariables.html#1111" class="Bound">n</a> <a id="1206" href="FOL.Syntax.FreshVariables.html#1179" class="Bound">ψ</a> <a id="1208" class="Symbol">→</a> <a id="1210" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1217" href="FOL.Syntax.FreshVariables.html#1111" class="Bound">n</a> <a id="1219" class="Symbol">(</a><a id="1220" href="FOL.Syntax.FreshVariables.html#1177" class="Bound">φ</a> <a id="1222" href="FOL.Syntax.Base.html#3826" class="InductiveConstructor Operator">→̇</a> <a id="1225" href="FOL.Syntax.FreshVariables.html#1179" class="Bound">ψ</a><a id="1226" class="Symbol">)</a>
  <a id="freshᵩ.fresh∀̇"></a><a id="1230" href="FOL.Syntax.FreshVariables.html#1230" class="InductiveConstructor">fresh∀̇</a> <a id="1238" class="Symbol">:</a> <a id="1240" class="Symbol">∀</a> <a id="1242" class="Symbol">{</a><a id="1243" href="FOL.Syntax.FreshVariables.html#1243" class="Bound">φ</a><a id="1244" class="Symbol">}</a> <a id="1246" class="Symbol">→</a> <a id="1248" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1255" class="Symbol">(</a><a id="1256" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1260" href="FOL.Syntax.FreshVariables.html#1111" class="Bound">n</a><a id="1261" class="Symbol">)</a> <a id="1263" href="FOL.Syntax.FreshVariables.html#1243" class="Bound">φ</a> <a id="1265" class="Symbol">→</a> <a id="1267" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1274" href="FOL.Syntax.FreshVariables.html#1111" class="Bound">n</a> <a id="1276" class="Symbol">(</a><a id="1277" href="FOL.Syntax.Base.html#3863" class="InductiveConstructor Operator">∀̇</a> <a id="1280" href="FOL.Syntax.FreshVariables.html#1243" class="Bound">φ</a><a id="1281" class="Symbol">)</a>
  <a id="freshᵩ.fresh$̇"></a><a id="1285" href="FOL.Syntax.FreshVariables.html#1285" class="InductiveConstructor">fresh$̇</a> <a id="1293" class="Symbol">:</a> <a id="1295" class="Symbol">∀</a> <a id="1297" class="Symbol">{</a><a id="1298" href="FOL.Syntax.FreshVariables.html#1298" class="Bound">R</a> <a id="1300" href="FOL.Syntax.FreshVariables.html#1300" class="Bound">t⃗</a><a id="1302" class="Symbol">}</a> <a id="1304" class="Symbol">→</a> <a id="1306" class="Symbol">(∀</a> <a id="1309" href="FOL.Syntax.FreshVariables.html#1309" class="Bound">t</a> <a id="1311" class="Symbol">→</a> <a id="1313" href="FOL.Syntax.FreshVariables.html#1309" class="Bound">t</a> <a id="1315" href="Foundation.Essential.html#12199" class="Function Operator">∈⃗</a> <a id="1318" href="FOL.Syntax.FreshVariables.html#1300" class="Bound">t⃗</a> <a id="1321" class="Symbol">→</a> <a id="1323" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="1330" href="FOL.Syntax.FreshVariables.html#1111" class="Bound">n</a> <a id="1332" href="FOL.Syntax.FreshVariables.html#1309" class="Bound">t</a><a id="1333" class="Symbol">)</a> <a id="1335" class="Symbol">→</a> <a id="1337" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1344" href="FOL.Syntax.FreshVariables.html#1111" class="Bound">n</a> <a id="1346" class="Symbol">(</a><a id="1347" href="FOL.Syntax.FreshVariables.html#1298" class="Bound">R</a> <a id="1349" href="FOL.Syntax.Base.html#3889" class="InductiveConstructor Operator">$̇</a> <a id="1352" href="FOL.Syntax.FreshVariables.html#1300" class="Bound">t⃗</a><a id="1354" class="Symbol">)</a>

<a id="fresh→̇-elim"></a><a id="1357" href="FOL.Syntax.FreshVariables.html#1357" class="Function">fresh→̇-elim</a> <a id="1370" class="Symbol">:</a> <a id="1372" class="Symbol">∀</a> <a id="1374" class="Symbol">{</a><a id="1375" href="FOL.Syntax.FreshVariables.html#1375" class="Bound">n</a> <a id="1377" href="FOL.Syntax.FreshVariables.html#1377" class="Bound">φ</a> <a id="1379" href="FOL.Syntax.FreshVariables.html#1379" class="Bound">ψ</a><a id="1380" class="Symbol">}</a> <a id="1382" class="Symbol">→</a> <a id="1384" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1391" href="FOL.Syntax.FreshVariables.html#1375" class="Bound">n</a> <a id="1393" class="Symbol">(</a><a id="1394" href="FOL.Syntax.FreshVariables.html#1377" class="Bound">φ</a> <a id="1396" href="FOL.Syntax.Base.html#3826" class="InductiveConstructor Operator">→̇</a> <a id="1399" href="FOL.Syntax.FreshVariables.html#1379" class="Bound">ψ</a><a id="1400" class="Symbol">)</a> <a id="1402" class="Symbol">→</a> <a id="1404" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1411" href="FOL.Syntax.FreshVariables.html#1375" class="Bound">n</a> <a id="1413" href="FOL.Syntax.FreshVariables.html#1377" class="Bound">φ</a> <a id="1415" href="Foundation.Data.Sigma.html#154" class="Function Operator">×</a> <a id="1417" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1424" href="FOL.Syntax.FreshVariables.html#1375" class="Bound">n</a> <a id="1426" href="FOL.Syntax.FreshVariables.html#1379" class="Bound">ψ</a>
<a id="1428" href="FOL.Syntax.FreshVariables.html#1357" class="Function">fresh→̇-elim</a> <a id="1441" class="Symbol">(</a><a id="1442" href="FOL.Syntax.FreshVariables.html#1164" class="InductiveConstructor">fresh→̇</a> <a id="1450" href="FOL.Syntax.FreshVariables.html#1450" class="Bound">p</a> <a id="1452" href="FOL.Syntax.FreshVariables.html#1452" class="Bound">q</a><a id="1453" class="Symbol">)</a> <a id="1455" class="Symbol">=</a> <a id="1457" href="FOL.Syntax.FreshVariables.html#1450" class="Bound">p</a> <a id="1459" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="1461" href="FOL.Syntax.FreshVariables.html#1452" class="Bound">q</a>

<a id="fresh∀̇-elim"></a><a id="1464" href="FOL.Syntax.FreshVariables.html#1464" class="Function">fresh∀̇-elim</a> <a id="1477" class="Symbol">:</a> <a id="1479" class="Symbol">∀</a> <a id="1481" class="Symbol">{</a><a id="1482" href="FOL.Syntax.FreshVariables.html#1482" class="Bound">n</a> <a id="1484" href="FOL.Syntax.FreshVariables.html#1484" class="Bound">φ</a><a id="1485" class="Symbol">}</a> <a id="1487" class="Symbol">→</a> <a id="1489" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1496" href="FOL.Syntax.FreshVariables.html#1482" class="Bound">n</a> <a id="1498" class="Symbol">(</a><a id="1499" href="FOL.Syntax.Base.html#3863" class="InductiveConstructor Operator">∀̇</a> <a id="1502" href="FOL.Syntax.FreshVariables.html#1484" class="Bound">φ</a><a id="1503" class="Symbol">)</a> <a id="1505" class="Symbol">→</a> <a id="1507" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1514" class="Symbol">(</a><a id="1515" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1519" href="FOL.Syntax.FreshVariables.html#1482" class="Bound">n</a><a id="1520" class="Symbol">)</a> <a id="1522" href="FOL.Syntax.FreshVariables.html#1484" class="Bound">φ</a>
<a id="1524" href="FOL.Syntax.FreshVariables.html#1464" class="Function">fresh∀̇-elim</a> <a id="1537" class="Symbol">(</a><a id="1538" href="FOL.Syntax.FreshVariables.html#1230" class="InductiveConstructor">fresh∀̇</a> <a id="1546" href="FOL.Syntax.FreshVariables.html#1546" class="Bound">p</a><a id="1547" class="Symbol">)</a> <a id="1549" class="Symbol">=</a> <a id="1551" href="FOL.Syntax.FreshVariables.html#1546" class="Bound">p</a>

<a id="freshR$̇-elim"></a><a id="1554" href="FOL.Syntax.FreshVariables.html#1554" class="Function">freshR$̇-elim</a> <a id="1568" class="Symbol">:</a> <a id="1570" class="Symbol">∀</a> <a id="1572" class="Symbol">{</a><a id="1573" href="FOL.Syntax.FreshVariables.html#1573" class="Bound">n</a> <a id="1575" href="FOL.Syntax.FreshVariables.html#1575" class="Bound">R</a> <a id="1577" href="FOL.Syntax.FreshVariables.html#1577" class="Bound">t⃗</a><a id="1579" class="Symbol">}</a> <a id="1581" class="Symbol">→</a> <a id="1583" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1590" href="FOL.Syntax.FreshVariables.html#1573" class="Bound">n</a> <a id="1592" class="Symbol">(</a><a id="1593" href="FOL.Syntax.FreshVariables.html#1575" class="Bound">R</a> <a id="1595" class="InductiveConstructor Operator">$̇</a> <a id="1598" href="FOL.Syntax.FreshVariables.html#1577" class="Bound">t⃗</a><a id="1600" class="Symbol">)</a> <a id="1602" class="Symbol">→</a> <a id="1604" class="Symbol">(∀</a> <a id="1607" href="FOL.Syntax.FreshVariables.html#1607" class="Bound">t</a> <a id="1609" class="Symbol">→</a> <a id="1611" href="FOL.Syntax.FreshVariables.html#1607" class="Bound">t</a> <a id="1613" href="Foundation.Essential.html#12199" class="Function Operator">∈⃗</a> <a id="1616" href="FOL.Syntax.FreshVariables.html#1577" class="Bound">t⃗</a> <a id="1619" class="Symbol">→</a> <a id="1621" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="1628" href="FOL.Syntax.FreshVariables.html#1573" class="Bound">n</a> <a id="1630" href="FOL.Syntax.FreshVariables.html#1607" class="Bound">t</a><a id="1631" class="Symbol">)</a>
<a id="1633" href="FOL.Syntax.FreshVariables.html#1554" class="Function">freshR$̇-elim</a> <a id="1647" class="Symbol">(</a><a id="1648" href="FOL.Syntax.FreshVariables.html#1285" class="InductiveConstructor">fresh$̇</a> <a id="1656" href="FOL.Syntax.FreshVariables.html#1656" class="Bound">p</a><a id="1657" class="Symbol">)</a> <a id="1659" class="Symbol">=</a> <a id="1661" href="FOL.Syntax.FreshVariables.html#1656" class="Bound">p</a>
</pre>
<p><strong><u>定义</u></strong> 我们说 <code>n</code> 是 <code>Γ</code> 的新变元 (或者说 <code>n</code> 在 <code>Γ</code> 中未使用), 当且仅当 <code>n</code> 是每个 <code>φ ∈ᴸ Γ</code> 的新变元.</p>
<pre class="Agda"><a id="fresh"></a><a id="1760" href="FOL.Syntax.FreshVariables.html#1760" class="Function">fresh</a> <a id="1766" class="Symbol">:</a> <a id="1768" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1770" class="Symbol">→</a> <a id="1772" href="FOL.Syntax.Base.html#4774" class="Function">Context</a> <a id="1780" class="Symbol">→</a> <a id="1782" href="Agda.Primitive.html#388" class="Primitive">𝕋</a>
<a id="1784" href="FOL.Syntax.FreshVariables.html#1760" class="Function">fresh</a> <a id="1790" href="FOL.Syntax.FreshVariables.html#1790" class="Bound">n</a> <a id="1792" href="FOL.Syntax.FreshVariables.html#1792" class="Bound">Γ</a> <a id="1794" class="Symbol">=</a> <a id="1796" class="Symbol">∀</a> <a id="1798" class="Symbol">{</a><a id="1799" href="FOL.Syntax.FreshVariables.html#1799" class="Bound">φ</a><a id="1800" class="Symbol">}</a> <a id="1802" class="Symbol">→</a> <a id="1804" href="FOL.Syntax.FreshVariables.html#1799" class="Bound">φ</a> <a id="1806" href="Data.List.Membership.Setoid.html#943" class="Function Operator">∈ᴸ</a> <a id="1809" href="FOL.Syntax.FreshVariables.html#1792" class="Bound">Γ</a> <a id="1811" class="Symbol">→</a> <a id="1813" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="1820" href="FOL.Syntax.FreshVariables.html#1790" class="Bound">n</a> <a id="1822" href="FOL.Syntax.FreshVariables.html#1799" class="Bound">φ</a>
</pre>
<p><strong><u>定义</u></strong> 我们说 <code>n</code> (含) 以上的变元都是项 <code>t</code> (或公式 <code>φ</code>, 或语境 <code>Γ</code>) 的新变元, 当且仅当任意 <code>m ≥ n</code> 都是 <code>t</code> (或 <code>φ</code>, 或 <code>Γ</code>) 的新变元.</p>
<pre class="Agda"><a id="freshₜFrom"></a><a id="1945" href="FOL.Syntax.FreshVariables.html#1945" class="Function">freshₜFrom</a> <a id="1956" class="Symbol">:</a> <a id="1958" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1960" class="Symbol">→</a> <a id="1962" href="FOL.Syntax.Base.html#731" class="Datatype">Term</a> <a id="1967" class="Symbol">→</a> <a id="1969" href="Agda.Primitive.html#388" class="Primitive">𝕋</a>
<a id="1971" href="FOL.Syntax.FreshVariables.html#1945" class="Function">freshₜFrom</a> <a id="1982" href="FOL.Syntax.FreshVariables.html#1982" class="Bound">n</a> <a id="1984" href="FOL.Syntax.FreshVariables.html#1984" class="Bound">t</a> <a id="1986" class="Symbol">=</a> <a id="1988" class="Symbol">∀</a> <a id="1990" class="Symbol">{</a><a id="1991" href="FOL.Syntax.FreshVariables.html#1991" class="Bound">m</a><a id="1992" class="Symbol">}</a> <a id="1994" class="Symbol">→</a> <a id="1996" href="FOL.Syntax.FreshVariables.html#1982" class="Bound">n</a> <a id="1998" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤</a> <a id="2000" href="FOL.Syntax.FreshVariables.html#1991" class="Bound">m</a> <a id="2002" class="Symbol">→</a> <a id="2004" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="2011" href="FOL.Syntax.FreshVariables.html#1991" class="Bound">m</a> <a id="2013" href="FOL.Syntax.FreshVariables.html#1984" class="Bound">t</a>

<a id="freshᵩFrom"></a><a id="2016" href="FOL.Syntax.FreshVariables.html#2016" class="Function">freshᵩFrom</a> <a id="2027" class="Symbol">:</a> <a id="2029" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2031" class="Symbol">→</a> <a id="2033" href="FOL.Syntax.Base.html#3791" class="Datatype">Formula</a> <a id="2041" class="Symbol">→</a> <a id="2043" href="Agda.Primitive.html#388" class="Primitive">𝕋</a>
<a id="2045" href="FOL.Syntax.FreshVariables.html#2016" class="Function">freshᵩFrom</a> <a id="2056" href="FOL.Syntax.FreshVariables.html#2056" class="Bound">n</a> <a id="2058" href="FOL.Syntax.FreshVariables.html#2058" class="Bound">φ</a> <a id="2060" class="Symbol">=</a> <a id="2062" class="Symbol">∀</a> <a id="2064" class="Symbol">{</a><a id="2065" href="FOL.Syntax.FreshVariables.html#2065" class="Bound">m</a><a id="2066" class="Symbol">}</a> <a id="2068" class="Symbol">→</a> <a id="2070" href="FOL.Syntax.FreshVariables.html#2056" class="Bound">n</a> <a id="2072" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤</a> <a id="2074" href="FOL.Syntax.FreshVariables.html#2065" class="Bound">m</a> <a id="2076" class="Symbol">→</a> <a id="2078" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="2085" href="FOL.Syntax.FreshVariables.html#2065" class="Bound">m</a> <a id="2087" href="FOL.Syntax.FreshVariables.html#2058" class="Bound">φ</a>

<a id="freshFrom"></a><a id="2090" href="FOL.Syntax.FreshVariables.html#2090" class="Function">freshFrom</a> <a id="2100" class="Symbol">:</a> <a id="2102" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2104" class="Symbol">→</a> <a id="2106" href="FOL.Syntax.Base.html#4774" class="Function">Context</a> <a id="2114" class="Symbol">→</a> <a id="2116" href="Agda.Primitive.html#388" class="Primitive">𝕋</a>
<a id="2118" href="FOL.Syntax.FreshVariables.html#2090" class="Function">freshFrom</a> <a id="2128" href="FOL.Syntax.FreshVariables.html#2128" class="Bound">n</a> <a id="2130" href="FOL.Syntax.FreshVariables.html#2130" class="Bound">Γ</a> <a id="2132" class="Symbol">=</a> <a id="2134" class="Symbol">∀</a> <a id="2136" class="Symbol">{</a><a id="2137" href="FOL.Syntax.FreshVariables.html#2137" class="Bound">m</a><a id="2138" class="Symbol">}</a> <a id="2140" class="Symbol">→</a> <a id="2142" href="FOL.Syntax.FreshVariables.html#2128" class="Bound">n</a> <a id="2144" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤</a> <a id="2146" href="FOL.Syntax.FreshVariables.html#2137" class="Bound">m</a> <a id="2148" class="Symbol">→</a> <a id="2150" href="FOL.Syntax.FreshVariables.html#1760" class="Function">fresh</a> <a id="2156" href="FOL.Syntax.FreshVariables.html#2137" class="Bound">m</a> <a id="2158" href="FOL.Syntax.FreshVariables.html#2130" class="Bound">Γ</a>
</pre>
<p><strong><u>引理</u></strong> 给定项的向量 <code>t⃗</code> 以及每个 <code>t ∈⃗ t⃗</code> 的一个新变元, 可以找到对任意 <code>t ∈⃗ t⃗</code> 都是新变元的一个 <code>n</code> (简称 <code>t⃗</code> 的新变元).<br />
<strong><u>证明</u></strong> 归纳 <code>t⃗</code> 的长度. 长度为零时虚空真. 长度为后继时取向量的头 <code>t</code> 及尾 <code>t⃗</code>. 由前提有 <code>t</code> 的新变元 <code>n</code>, 由归纳假设有 <code>t⃗</code> 的新变元 <code>m</code>. 取 <code>n + m</code> 即可. ∎</p>
<pre class="Agda"><a id="Σfreshₜ⃗"></a><a id="2391" href="FOL.Syntax.FreshVariables.html#2391" class="Function">Σfreshₜ⃗</a> <a id="2400" class="Symbol">:</a> <a id="2402" class="Symbol">(</a><a id="2403" href="FOL.Syntax.FreshVariables.html#2403" class="Bound">t⃗</a> <a id="2406" class="Symbol">:</a> <a id="2408" href="Data.Vec.Base.html#1107" class="Datatype">𝕍</a> <a id="2410" href="FOL.Syntax.Base.html#731" class="Datatype">Term</a> <a id="2415" href="FOL.Syntax.FreshVariables.html#339" class="Generalizable">n</a><a id="2416" class="Symbol">)</a> <a id="2418" class="Symbol">→</a> <a id="2420" class="Symbol">(∀</a> <a id="2423" href="FOL.Syntax.FreshVariables.html#2423" class="Bound">t</a> <a id="2425" class="Symbol">→</a> <a id="2427" href="FOL.Syntax.FreshVariables.html#2423" class="Bound">t</a> <a id="2429" href="Foundation.Essential.html#12199" class="Function Operator">∈⃗</a> <a id="2432" href="FOL.Syntax.FreshVariables.html#2403" class="Bound">t⃗</a> <a id="2435" class="Symbol">→</a> <a id="2437" href="Foundation.Prelude.Builtin.html#1069" class="Function">Σ</a> <a id="2439" href="FOL.Syntax.FreshVariables.html#2439" class="Bound">n</a> <a id="2441" href="Foundation.Prelude.Builtin.html#1069" class="Function">，</a> <a id="2443" href="FOL.Syntax.FreshVariables.html#1945" class="Function">freshₜFrom</a> <a id="2454" href="FOL.Syntax.FreshVariables.html#2439" class="Bound">n</a> <a id="2456" href="FOL.Syntax.FreshVariables.html#2423" class="Bound">t</a><a id="2457" class="Symbol">)</a> <a id="2459" class="Symbol">→</a>
  <a id="2463" href="Foundation.Prelude.Builtin.html#1069" class="Function">Σ</a> <a id="2465" href="FOL.Syntax.FreshVariables.html#2465" class="Bound">n</a> <a id="2467" href="Foundation.Prelude.Builtin.html#1069" class="Function">，</a> <a id="2469" class="Symbol">∀</a> <a id="2471" href="FOL.Syntax.FreshVariables.html#2471" class="Bound">t</a> <a id="2473" class="Symbol">→</a> <a id="2475" href="FOL.Syntax.FreshVariables.html#2471" class="Bound">t</a> <a id="2477" href="Foundation.Essential.html#12199" class="Function Operator">∈⃗</a> <a id="2480" href="FOL.Syntax.FreshVariables.html#2403" class="Bound">t⃗</a> <a id="2483" class="Symbol">→</a> <a id="2485" href="FOL.Syntax.FreshVariables.html#1945" class="Function">freshₜFrom</a> <a id="2496" href="FOL.Syntax.FreshVariables.html#2465" class="Bound">n</a> <a id="2498" href="FOL.Syntax.FreshVariables.html#2471" class="Bound">t</a>
<a id="2500" href="FOL.Syntax.FreshVariables.html#2391" class="Function">Σfreshₜ⃗</a> <a id="2509" href="Data.Vec.Base.html#1143" class="InductiveConstructor">[]</a> <a id="2512" href="FOL.Syntax.FreshVariables.html#2512" class="Bound">H</a> <a id="2514" class="Symbol">=</a> <a id="2516" class="Number">0</a> <a id="2518" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="2520" class="Symbol">λ</a> <a id="2522" href="FOL.Syntax.FreshVariables.html#2522" class="Bound">_</a> <a id="2524" class="Symbol">()</a>
<a id="2527" href="FOL.Syntax.FreshVariables.html#2391" class="Function">Σfreshₜ⃗</a> <a id="2536" class="Symbol">(</a><a id="2537" href="FOL.Syntax.FreshVariables.html#2537" class="Bound">t</a> <a id="2539" href="Data.Vec.Base.html#1162" class="InductiveConstructor Operator">∷</a> <a id="2541" href="FOL.Syntax.FreshVariables.html#2541" class="Bound">t⃗</a><a id="2543" class="Symbol">)</a> <a id="2545" href="FOL.Syntax.FreshVariables.html#2545" class="Bound">H</a> <a id="2547" class="Keyword">with</a> <a id="2552" href="FOL.Syntax.FreshVariables.html#2545" class="Bound">H</a> <a id="2554" href="FOL.Syntax.FreshVariables.html#2537" class="Bound">t</a> <a id="2556" class="Symbol">(</a><a id="2557" href="Data.Vec.Relation.Unary.Any.html#1144" class="InductiveConstructor">here</a> <a id="2562" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="2566" class="Symbol">)</a> <a id="2568" class="Symbol">|</a> <a id="2570" href="FOL.Syntax.FreshVariables.html#2391" class="Function">Σfreshₜ⃗</a> <a id="2579" href="FOL.Syntax.FreshVariables.html#2541" class="Bound">t⃗</a> <a id="2582" class="Symbol">(λ</a> <a id="2585" href="FOL.Syntax.FreshVariables.html#2585" class="Bound">t</a> <a id="2587" href="FOL.Syntax.FreshVariables.html#2587" class="Bound">t∈⃗</a> <a id="2591" class="Symbol">→</a> <a id="2593" href="FOL.Syntax.FreshVariables.html#2545" class="Bound">H</a> <a id="2595" href="FOL.Syntax.FreshVariables.html#2585" class="Bound">t</a> <a id="2597" class="Symbol">(</a><a id="2598" href="Data.Vec.Relation.Unary.Any.html#1211" class="InductiveConstructor">there</a> <a id="2604" href="FOL.Syntax.FreshVariables.html#2587" class="Bound">t∈⃗</a><a id="2607" class="Symbol">))</a>
<a id="2610" class="Symbol">...</a> <a id="2614" class="Symbol">|</a> <a id="2616" href="FOL.Syntax.FreshVariables.html#2616" class="Bound">n</a> <a id="2618" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="2620" href="FOL.Syntax.FreshVariables.html#2620" class="Bound">Hn</a> <a id="2623" class="Symbol">|</a> <a id="2625" href="FOL.Syntax.FreshVariables.html#2625" class="Bound">m</a> <a id="2627" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="2629" href="FOL.Syntax.FreshVariables.html#2629" class="Bound">Hm</a> <a id="2632" class="Symbol">=</a> <a id="2634" href="FOL.Syntax.FreshVariables.html#2616" class="Bound">n</a> <a id="2636" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2638" href="FOL.Syntax.FreshVariables.html#2625" class="Bound">m</a> <a id="2640" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="2642" href="FOL.Syntax.FreshVariables.html#2655" class="Function">Hn+m</a> <a id="2647" class="Keyword">where</a>
  <a id="2655" href="FOL.Syntax.FreshVariables.html#2655" class="Function">Hn+m</a> <a id="2660" class="Symbol">:</a> <a id="2662" class="Symbol">∀</a> <a id="2664" href="FOL.Syntax.FreshVariables.html#2664" class="Bound">s</a> <a id="2666" class="Symbol">→</a> <a id="2668" href="FOL.Syntax.FreshVariables.html#2664" class="Bound">s</a> <a id="2670" href="Foundation.Essential.html#12199" class="Function Operator">∈⃗</a> <a id="2673" class="Bound">t</a> <a id="2675" href="Data.Vec.Base.html#1162" class="InductiveConstructor Operator">∷</a> <a id="2677" class="Bound">t⃗</a> <a id="2680" class="Symbol">→</a> <a id="2682" href="FOL.Syntax.FreshVariables.html#1945" class="Function">freshₜFrom</a> <a id="2693" class="Symbol">(</a><a id="2694" href="FOL.Syntax.FreshVariables.html#2616" class="Bound">n</a> <a id="2696" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2698" href="FOL.Syntax.FreshVariables.html#2625" class="Bound">m</a><a id="2699" class="Symbol">)</a> <a id="2701" href="FOL.Syntax.FreshVariables.html#2664" class="Bound">s</a>
  <a id="2705" href="FOL.Syntax.FreshVariables.html#2655" class="Function">Hn+m</a> <a id="2710" href="FOL.Syntax.FreshVariables.html#2710" class="Bound">s</a> <a id="2712" class="Symbol">(</a><a id="2713" href="Data.Vec.Relation.Unary.Any.html#1144" class="InductiveConstructor">here</a> <a id="2718" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="2722" class="Symbol">)</a> <a id="2724" href="FOL.Syntax.FreshVariables.html#2724" class="Bound">n+m≤k</a> <a id="2730" class="Symbol">=</a> <a id="2732" href="FOL.Syntax.FreshVariables.html#2620" class="Bound">Hn</a> <a id="2735" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2737" href="Data.Nat.Properties.html#5682" class="Function">≤-trans</a> <a id="2745" class="Symbol">(</a><a id="2746" href="Data.Nat.Properties.html#18740" class="Function">m≤m+n</a> <a id="2752" class="Symbol">_</a> <a id="2754" class="Symbol">_)</a> <a id="2757" href="FOL.Syntax.FreshVariables.html#2724" class="Bound">n+m≤k</a>
  <a id="2765" href="FOL.Syntax.FreshVariables.html#2655" class="Function">Hn+m</a> <a id="2770" href="FOL.Syntax.FreshVariables.html#2770" class="Bound">s</a> <a id="2772" class="Symbol">(</a><a id="2773" href="Data.Vec.Relation.Unary.Any.html#1211" class="InductiveConstructor">there</a> <a id="2779" href="FOL.Syntax.FreshVariables.html#2779" class="Bound">s∈⃗</a><a id="2782" class="Symbol">)</a> <a id="2784" href="FOL.Syntax.FreshVariables.html#2784" class="Bound">n+m≤k</a> <a id="2790" class="Symbol">=</a> <a id="2792" href="FOL.Syntax.FreshVariables.html#2629" class="Bound">Hm</a> <a id="2795" href="FOL.Syntax.FreshVariables.html#2770" class="Bound">s</a> <a id="2797" href="FOL.Syntax.FreshVariables.html#2779" class="Bound">s∈⃗</a> <a id="2801" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2803" href="Data.Nat.Properties.html#5682" class="Function">≤-trans</a> <a id="2811" class="Symbol">(</a><a id="2812" href="Data.Nat.Properties.html#18823" class="Function">m≤n+m</a> <a id="2818" class="Symbol">_</a> <a id="2820" class="Symbol">_)</a> <a id="2823" href="FOL.Syntax.FreshVariables.html#2784" class="Bound">n+m≤k</a>
</pre>
<p><strong><u>引理</u></strong> 任意项都能找到一个新变元.<br />
<strong><u>证明</u></strong> 使用项的结构归纳法. 当项是变元 <code># n</code> 时取 <code>suc n</code> 即可. 当项是函数应用 <code>f $̇ t⃗</code> 时, 由归纳假设及引理 <code>Freshₜ⃗</code>, 有 <code>t⃗</code> 的新变元 <code>n</code>, 它就是函数应用 <code>f $̇ t⃗</code> 的新变元. ∎</p>
<pre class="Agda"><a id="Σfreshₜ"></a><a id="3009" href="FOL.Syntax.FreshVariables.html#3009" class="Function">Σfreshₜ</a> <a id="3017" class="Symbol">:</a> <a id="3019" class="Symbol">∀</a> <a id="3021" href="FOL.Syntax.FreshVariables.html#3021" class="Bound">t</a> <a id="3023" class="Symbol">→</a> <a id="3025" href="Foundation.Prelude.Builtin.html#1069" class="Function">Σ</a> <a id="3027" href="FOL.Syntax.FreshVariables.html#3027" class="Bound">n</a> <a id="3029" href="Foundation.Prelude.Builtin.html#1069" class="Function">，</a> <a id="3031" href="FOL.Syntax.FreshVariables.html#1945" class="Function">freshₜFrom</a> <a id="3042" href="FOL.Syntax.FreshVariables.html#3027" class="Bound">n</a> <a id="3044" href="FOL.Syntax.FreshVariables.html#3021" class="Bound">t</a>
<a id="3046" href="FOL.Syntax.FreshVariables.html#3009" class="Function">Σfreshₜ</a> <a id="3054" class="Symbol">=</a> <a id="3056" href="FOL.Syntax.Base.html#1264" class="Function">term-elim</a>
  <a id="3068" class="Symbol">(λ</a> <a id="3071" href="FOL.Syntax.FreshVariables.html#3071" class="Bound">n</a> <a id="3073" class="Symbol">→</a> <a id="3075" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="3079" href="FOL.Syntax.FreshVariables.html#3071" class="Bound">n</a> <a id="3081" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3083" class="Symbol">λ</a> <a id="3085" href="FOL.Syntax.FreshVariables.html#3085" class="Bound">le</a> <a id="3088" class="Symbol">→</a> <a id="3090" href="FOL.Syntax.FreshVariables.html#562" class="InductiveConstructor">fresh#</a> <a id="3097" class="Symbol">λ</a> <a id="3099" class="Symbol">{</a> <a id="3101" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="3106" class="Symbol">→</a> <a id="3108" href="Data.Nat.Properties.html#8314" class="Function">1+n≰n</a> <a id="3114" href="FOL.Syntax.FreshVariables.html#3085" class="Bound">le</a> <a id="3117" class="Symbol">})</a>
  <a id="3122" class="Symbol">(λ</a> <a id="3125" href="FOL.Syntax.FreshVariables.html#3125" class="Bound">f</a> <a id="3127" href="FOL.Syntax.FreshVariables.html#3127" class="Bound">t⃗</a> <a id="3130" href="FOL.Syntax.FreshVariables.html#3130" class="Bound">IH</a> <a id="3133" class="Symbol">→</a> <a id="3135" class="Keyword">let</a> <a id="3139" href="FOL.Syntax.FreshVariables.html#3139" class="Bound">n</a> <a id="3141" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3143" href="FOL.Syntax.FreshVariables.html#3143" class="Bound">Hn</a> <a id="3146" class="Symbol">=</a> <a id="3148" href="FOL.Syntax.FreshVariables.html#2391" class="Function">Σfreshₜ⃗</a> <a id="3157" href="FOL.Syntax.FreshVariables.html#3127" class="Bound">t⃗</a> <a id="3160" href="FOL.Syntax.FreshVariables.html#3130" class="Bound">IH</a> <a id="3163" class="Keyword">in</a>
    <a id="3170" href="FOL.Syntax.FreshVariables.html#3139" class="Bound">n</a> <a id="3172" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3174" class="Symbol">λ</a> <a id="3176" href="FOL.Syntax.FreshVariables.html#3176" class="Bound">n≤m</a> <a id="3180" class="Symbol">→</a> <a id="3182" href="FOL.Syntax.FreshVariables.html#604" class="InductiveConstructor">fresh$̇</a> <a id="3190" class="Symbol">λ</a> <a id="3192" href="FOL.Syntax.FreshVariables.html#3192" class="Bound">t</a> <a id="3194" href="FOL.Syntax.FreshVariables.html#3194" class="Bound">t∈⃗</a> <a id="3198" class="Symbol">→</a> <a id="3200" href="FOL.Syntax.FreshVariables.html#3143" class="Bound">Hn</a> <a id="3203" href="FOL.Syntax.FreshVariables.html#3192" class="Bound">t</a> <a id="3205" href="FOL.Syntax.FreshVariables.html#3194" class="Bound">t∈⃗</a> <a id="3209" href="FOL.Syntax.FreshVariables.html#3176" class="Bound">n≤m</a><a id="3212" class="Symbol">)</a>
</pre>
<p><strong><u>引理</u></strong> 任意公式都能找到一个新变元.<br />
<strong><u>证明</u></strong> 对公式的结构归纳. - 当公式是恒假式 <code>⊥̇</code> 时取 <code>0</code> 即可. - 当公式是蕴含式 <code>φ →̇ ψ</code> 时, 由归纳假设, 有 <code>φ</code> 的新变元 <code>n</code>, <code>ψ</code> 的新变元 <code>m</code>, 取 <code>n + m</code> 即可. - 当公式是全称量化式 <code>∀̇ φ</code> 时, 由归纳假设, 有 <code>φ</code> 的新变元 <code>n</code>, 取 <code>n</code> 即可. - 当公式是关系应用 <code>R $̇ t⃗</code> 时, 由归纳假设及引理 <code>Freshₜ⃗</code>, 有 <code>t⃗</code> 的新变元 <code>n</code>, 取 <code>n</code> 即可. ∎</p>
<pre class="Agda"><a id="Σfreshᵩ"></a><a id="3510" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="3518" class="Symbol">:</a> <a id="3520" class="Symbol">∀</a> <a id="3522" href="FOL.Syntax.FreshVariables.html#3522" class="Bound">φ</a> <a id="3524" class="Symbol">→</a> <a id="3526" href="Foundation.Prelude.Builtin.html#1069" class="Function">Σ</a> <a id="3528" href="FOL.Syntax.FreshVariables.html#3528" class="Bound">n</a> <a id="3530" href="Foundation.Prelude.Builtin.html#1069" class="Function">，</a> <a id="3532" href="FOL.Syntax.FreshVariables.html#2016" class="Function">freshᵩFrom</a> <a id="3543" href="FOL.Syntax.FreshVariables.html#3528" class="Bound">n</a> <a id="3545" href="FOL.Syntax.FreshVariables.html#3522" class="Bound">φ</a>
<a id="3547" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="3555" href="FOL.Syntax.Base.html#3811" class="InductiveConstructor">⊥̇</a> <a id="3558" class="Symbol">=</a> <a id="3560" class="Number">0</a> <a id="3562" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3564" class="Symbol">(λ</a> <a id="3567" href="FOL.Syntax.FreshVariables.html#3567" class="Bound">_</a> <a id="3569" class="Symbol">→</a> <a id="3571" href="FOL.Syntax.FreshVariables.html#1140" class="InductiveConstructor">fresh⊥̇</a><a id="3578" class="Symbol">)</a>
<a id="3580" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="3588" class="Symbol">(</a><a id="3589" href="FOL.Syntax.FreshVariables.html#3589" class="Bound">φ</a> <a id="3591" href="FOL.Syntax.Base.html#3826" class="InductiveConstructor Operator">→̇</a> <a id="3594" href="FOL.Syntax.FreshVariables.html#3594" class="Bound">ψ</a><a id="3595" class="Symbol">)</a> <a id="3597" class="Keyword">with</a> <a id="3602" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="3610" href="FOL.Syntax.FreshVariables.html#3589" class="Bound">φ</a> <a id="3612" class="Symbol">|</a> <a id="3614" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="3622" href="FOL.Syntax.FreshVariables.html#3594" class="Bound">ψ</a>
<a id="3624" class="Symbol">...</a> <a id="3628" class="Symbol">|</a> <a id="3630" href="FOL.Syntax.FreshVariables.html#3630" class="Bound">n</a> <a id="3632" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3634" href="FOL.Syntax.FreshVariables.html#3634" class="Bound">Hn</a> <a id="3637" class="Symbol">|</a> <a id="3639" href="FOL.Syntax.FreshVariables.html#3639" class="Bound">m</a> <a id="3641" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3643" href="FOL.Syntax.FreshVariables.html#3643" class="Bound">Hm</a> <a id="3646" class="Symbol">=</a> <a id="3648" href="FOL.Syntax.FreshVariables.html#3630" class="Bound">n</a> <a id="3650" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3652" href="FOL.Syntax.FreshVariables.html#3639" class="Bound">m</a> <a id="3654" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3656" class="Symbol">λ</a> <a id="3658" href="FOL.Syntax.FreshVariables.html#3658" class="Bound">le</a> <a id="3661" class="Symbol">→</a> <a id="3663" href="FOL.Syntax.FreshVariables.html#1164" class="InductiveConstructor">fresh→̇</a>
  <a id="3673" class="Symbol">(</a><a id="3674" href="FOL.Syntax.FreshVariables.html#3634" class="Bound">Hn</a> <a id="3677" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3679" href="Data.Nat.Properties.html#5682" class="Function">≤-trans</a> <a id="3687" class="Symbol">(</a><a id="3688" href="Data.Nat.Properties.html#18740" class="Function">m≤m+n</a> <a id="3694" class="Symbol">_</a> <a id="3696" class="Symbol">_)</a> <a id="3699" href="FOL.Syntax.FreshVariables.html#3658" class="Bound">le</a><a id="3701" class="Symbol">)</a>
  <a id="3705" class="Symbol">(</a><a id="3706" href="FOL.Syntax.FreshVariables.html#3643" class="Bound">Hm</a> <a id="3709" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3711" href="Data.Nat.Properties.html#5682" class="Function">≤-trans</a> <a id="3719" class="Symbol">(</a><a id="3720" href="Data.Nat.Properties.html#18823" class="Function">m≤n+m</a> <a id="3726" class="Symbol">_</a> <a id="3728" class="Symbol">_)</a> <a id="3731" href="FOL.Syntax.FreshVariables.html#3658" class="Bound">le</a><a id="3733" class="Symbol">)</a>
<a id="3735" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="3743" class="Symbol">(</a><a id="3744" href="FOL.Syntax.Base.html#3863" class="InductiveConstructor Operator">∀̇</a> <a id="3747" href="FOL.Syntax.FreshVariables.html#3747" class="Bound">φ</a><a id="3748" class="Symbol">)</a> <a id="3750" class="Keyword">with</a> <a id="3755" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="3763" href="FOL.Syntax.FreshVariables.html#3747" class="Bound">φ</a>
<a id="3765" class="Symbol">...</a> <a id="3769" class="Symbol">|</a> <a id="3771" href="FOL.Syntax.FreshVariables.html#3771" class="Bound">n</a> <a id="3773" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3775" href="FOL.Syntax.FreshVariables.html#3775" class="Bound">Hn</a> <a id="3778" class="Symbol">=</a> <a id="3780" href="FOL.Syntax.FreshVariables.html#3771" class="Bound">n</a> <a id="3782" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3784" class="Symbol">λ</a> <a id="3786" href="FOL.Syntax.FreshVariables.html#3786" class="Bound">n≤m</a> <a id="3790" class="Symbol">→</a> <a id="3792" href="FOL.Syntax.FreshVariables.html#1230" class="InductiveConstructor">fresh∀̇</a> <a id="3800" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3802" href="FOL.Syntax.FreshVariables.html#3775" class="Bound">Hn</a> <a id="3805" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3807" href="Data.Nat.Properties.html#5682" class="Function">≤-trans</a> <a id="3815" href="FOL.Syntax.FreshVariables.html#3786" class="Bound">n≤m</a> <a id="3819" class="Symbol">(</a><a id="3820" href="Data.Nat.Properties.html#8262" class="Function">n≤1+n</a> <a id="3826" class="Symbol">_)</a>
<a id="3829" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="3837" class="Symbol">(</a><a id="3838" href="FOL.Syntax.FreshVariables.html#3838" class="Bound">R</a> <a id="3840" href="FOL.Syntax.Base.html#3889" class="InductiveConstructor Operator">$̇</a> <a id="3843" href="FOL.Syntax.FreshVariables.html#3843" class="Bound">t⃗</a><a id="3845" class="Symbol">)</a> <a id="3847" class="Keyword">with</a> <a id="3852" href="FOL.Syntax.FreshVariables.html#2391" class="Function">Σfreshₜ⃗</a> <a id="3861" href="FOL.Syntax.FreshVariables.html#3843" class="Bound">t⃗</a> <a id="3864" class="Symbol">(λ</a> <a id="3867" href="FOL.Syntax.FreshVariables.html#3867" class="Bound">t</a> <a id="3869" href="FOL.Syntax.FreshVariables.html#3869" class="Bound">_</a> <a id="3871" class="Symbol">→</a> <a id="3873" href="FOL.Syntax.FreshVariables.html#3009" class="Function">Σfreshₜ</a> <a id="3881" href="FOL.Syntax.FreshVariables.html#3867" class="Bound">t</a><a id="3882" class="Symbol">)</a>
<a id="3884" class="Symbol">...</a> <a id="3888" class="Symbol">|</a> <a id="3890" href="FOL.Syntax.FreshVariables.html#3890" class="Bound">n</a> <a id="3892" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3894" href="FOL.Syntax.FreshVariables.html#3894" class="Bound">Hn</a> <a id="3897" class="Symbol">=</a> <a id="3899" href="FOL.Syntax.FreshVariables.html#3890" class="Bound">n</a> <a id="3901" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="3903" class="Symbol">λ</a> <a id="3905" href="FOL.Syntax.FreshVariables.html#3905" class="Bound">n≤m</a> <a id="3909" class="Symbol">→</a> <a id="3911" href="FOL.Syntax.FreshVariables.html#1285" class="InductiveConstructor">fresh$̇</a> <a id="3919" class="Symbol">λ</a> <a id="3921" href="FOL.Syntax.FreshVariables.html#3921" class="Bound">t</a> <a id="3923" href="FOL.Syntax.FreshVariables.html#3923" class="Bound">t∈⃗</a> <a id="3927" class="Symbol">→</a> <a id="3929" href="FOL.Syntax.FreshVariables.html#3894" class="Bound">Hn</a> <a id="3932" href="FOL.Syntax.FreshVariables.html#3921" class="Bound">t</a> <a id="3934" href="FOL.Syntax.FreshVariables.html#3923" class="Bound">t∈⃗</a> <a id="3938" href="FOL.Syntax.FreshVariables.html#3905" class="Bound">n≤m</a>
</pre>
<p><strong><u>定义</u></strong> 我们把语境 <code>Γ</code> 中那些公式 <code>φ</code> 的新变元中的最大者称为语境 <code>Γ</code> 的一个新变元, 记作 <code>freshVar Γ</code>.</p>
<pre class="Agda"><a id="freshVar"></a><a id="4033" href="FOL.Syntax.FreshVariables.html#4033" class="Function">freshVar</a> <a id="4042" class="Symbol">:</a> <a id="4044" href="FOL.Syntax.Base.html#4774" class="Function">Context</a> <a id="4052" class="Symbol">→</a> <a id="4054" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="4056" href="FOL.Syntax.FreshVariables.html#4033" class="Function">freshVar</a> <a id="4065" href="FOL.Syntax.FreshVariables.html#4065" class="Bound">Γ</a> <a id="4067" class="Symbol">=</a> <a id="4069" href="Data.List.Base.html#4332" class="Function">foldr</a> <a id="4075" href="Foundation.Data.Nat.html#139" class="Function">max</a> <a id="4079" class="Number">0</a> <a id="4081" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4083" href="Data.List.Base.html#1627" class="Function">map</a> <a id="4087" class="Symbol">(</a><a id="4088" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a> <a id="4092" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4094" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a><a id="4101" class="Symbol">)</a> <a id="4103" href="FOL.Syntax.FreshVariables.html#4065" class="Bound">Γ</a>

<a id="freshVar-≥"></a><a id="4106" href="FOL.Syntax.FreshVariables.html#4106" class="Function">freshVar-≥</a> <a id="4117" class="Symbol">:</a> <a id="4119" href="FOL.Syntax.Base.html#5232" class="Generalizable">φ</a> <a id="4121" href="Data.List.Membership.Setoid.html#943" class="Function Operator">∈ᴸ</a> <a id="4124" href="FOL.Syntax.Base.html#5250" class="Generalizable">Γ</a> <a id="4126" class="Symbol">→</a> <a id="4128" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="4136" href="FOL.Syntax.Base.html#5232" class="Generalizable">φ</a> <a id="4138" class="Symbol">.</a><a id="4139" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a> <a id="4143" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤</a> <a id="4145" href="FOL.Syntax.FreshVariables.html#4033" class="Function">freshVar</a> <a id="4154" href="FOL.Syntax.Base.html#5250" class="Generalizable">Γ</a>
<a id="4156" href="FOL.Syntax.FreshVariables.html#4106" class="Function">freshVar-≥</a> <a id="4167" class="Symbol">{</a><a id="4168" href="FOL.Syntax.FreshVariables.html#4168" class="Bound">φ</a><a id="4169" class="Symbol">}</a> <a id="4171" class="Symbol">{</a><a id="4172" href="FOL.Syntax.FreshVariables.html#4172" class="Bound">ψ</a> <a id="4174" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4176" href="FOL.Syntax.FreshVariables.html#4176" class="Bound">Γ</a><a id="4177" class="Symbol">}</a> <a id="4179" href="FOL.Syntax.FreshVariables.html#4179" class="Bound">φ∈</a> <a id="4182" class="Symbol">=</a> <a id="4184" href="Data.List.Properties.html#19645" class="Function">foldr-preservesᵒ</a> <a id="4201" href="FOL.Syntax.FreshVariables.html#4285" class="Function">H</a> <a id="4203" class="Symbol">_</a> <a id="4205" class="Symbol">_</a> <a id="4207" href="Function.Base.html#1974" class="Function Operator">$</a>
  <a id="4211" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="4216" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4218" href="Foundation.Data.List.SetTheoretic.html#519" class="Function">Any-intro</a> <a id="4228" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4230" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="4238" href="FOL.Syntax.FreshVariables.html#4168" class="Bound">φ</a> <a id="4240" class="Symbol">.</a><a id="4241" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a> <a id="4245" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="4247" href="Foundation.Data.List.SetTheoretic.html#1698" class="Function">∈map-intro</a> <a id="4258" href="FOL.Syntax.FreshVariables.html#4179" class="Bound">φ∈</a> <a id="4261" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4266" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="4268" href="Data.Nat.Properties.html#5499" class="Function">≤-refl</a> <a id="4275" class="Keyword">where</a>
    <a id="4285" href="FOL.Syntax.FreshVariables.html#4285" class="Function">H</a> <a id="4287" class="Symbol">:</a> <a id="4289" class="Symbol">∀</a> <a id="4291" href="FOL.Syntax.FreshVariables.html#4291" class="Bound">m</a> <a id="4293" href="FOL.Syntax.FreshVariables.html#4293" class="Bound">n</a> <a id="4295" class="Symbol">→</a> <a id="4297" class="Symbol">(</a><a id="4298" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="4306" href="FOL.Syntax.FreshVariables.html#4168" class="Bound">φ</a> <a id="4308" class="Symbol">.</a><a id="4309" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a> <a id="4313" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤</a> <a id="4315" href="FOL.Syntax.FreshVariables.html#4291" class="Bound">m</a><a id="4316" class="Symbol">)</a> <a id="4318" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="4320" class="Symbol">(</a><a id="4321" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="4329" href="FOL.Syntax.FreshVariables.html#4168" class="Bound">φ</a> <a id="4331" class="Symbol">.</a><a id="4332" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a> <a id="4336" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤</a> <a id="4338" href="FOL.Syntax.FreshVariables.html#4293" class="Bound">n</a><a id="4339" class="Symbol">)</a> <a id="4341" class="Symbol">→</a> <a id="4343" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="4351" href="FOL.Syntax.FreshVariables.html#4168" class="Bound">φ</a> <a id="4353" class="Symbol">.</a><a id="4354" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a> <a id="4358" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤</a> <a id="4360" href="Foundation.Data.Nat.html#139" class="Function">max</a> <a id="4364" href="FOL.Syntax.FreshVariables.html#4291" class="Bound">m</a> <a id="4366" href="FOL.Syntax.FreshVariables.html#4293" class="Bound">n</a>
    <a id="4372" href="FOL.Syntax.FreshVariables.html#4285" class="Function">H</a> <a id="4374" href="FOL.Syntax.FreshVariables.html#4374" class="Bound">m</a> <a id="4376" href="FOL.Syntax.FreshVariables.html#4376" class="Bound">n</a> <a id="4378" class="Symbol">(</a><a id="4379" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="4384" href="FOL.Syntax.FreshVariables.html#4384" class="Bound">p</a><a id="4385" class="Symbol">)</a> <a id="4387" class="Symbol">=</a> <a id="4389" href="Data.Nat.Properties.html#5682" class="Function">≤-trans</a> <a id="4397" href="FOL.Syntax.FreshVariables.html#4384" class="Bound">p</a> <a id="4399" href="Foundation.Data.Nat.Order.html#289" class="Function">≤maxˡ</a>
    <a id="4409" href="FOL.Syntax.FreshVariables.html#4285" class="Function">H</a> <a id="4411" href="FOL.Syntax.FreshVariables.html#4411" class="Bound">m</a> <a id="4413" href="FOL.Syntax.FreshVariables.html#4413" class="Bound">n</a> <a id="4415" class="Symbol">(</a><a id="4416" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="4421" href="FOL.Syntax.FreshVariables.html#4421" class="Bound">p</a><a id="4422" class="Symbol">)</a> <a id="4424" class="Symbol">=</a> <a id="4426" href="Data.Nat.Properties.html#5682" class="Function">≤-trans</a> <a id="4434" href="FOL.Syntax.FreshVariables.html#4421" class="Bound">p</a> <a id="4436" href="Foundation.Data.Nat.Order.html#340" class="Function">≤maxʳ</a>
</pre>
<p><strong><u>引理</u></strong> <code>freshVar (φ ∷ Γ)</code> 既是 <code>φ</code> 的新变元, 也是 <code>Γ</code> 的新变元.<br />
<strong><u>证明</u></strong> 依定义. ∎</p>
<pre class="Agda"><a id="freshVar∷-freshᵩ"></a><a id="4538" href="FOL.Syntax.FreshVariables.html#4538" class="Function">freshVar∷-freshᵩ</a> <a id="4555" class="Symbol">:</a> <a id="4557" class="Symbol">∀</a> <a id="4559" href="FOL.Syntax.FreshVariables.html#4559" class="Bound">φ</a> <a id="4561" href="FOL.Syntax.FreshVariables.html#4561" class="Bound">Γ</a> <a id="4563" class="Symbol">→</a> <a id="4565" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="4572" class="Symbol">(</a><a id="4573" href="FOL.Syntax.FreshVariables.html#4033" class="Function">freshVar</a> <a id="4582" class="Symbol">(</a><a id="4583" href="FOL.Syntax.FreshVariables.html#4559" class="Bound">φ</a> <a id="4585" class="InductiveConstructor Operator">∷</a> <a id="4587" href="FOL.Syntax.FreshVariables.html#4561" class="Bound">Γ</a><a id="4588" class="Symbol">))</a> <a id="4591" href="FOL.Syntax.FreshVariables.html#4559" class="Bound">φ</a>
<a id="4593" href="FOL.Syntax.FreshVariables.html#4538" class="Function">freshVar∷-freshᵩ</a> <a id="4610" href="FOL.Syntax.FreshVariables.html#4610" class="Bound">φ</a> <a id="4612" href="FOL.Syntax.FreshVariables.html#4612" class="Bound">Γ</a> <a id="4614" class="Symbol">=</a> <a id="4616" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="4624" class="Symbol">_</a> <a id="4626" class="Symbol">.</a><a id="4627" href="Agda.Builtin.Sigma.html#263" class="Field">snd</a> <a id="4631" class="Symbol">(</a><a id="4632" href="FOL.Syntax.FreshVariables.html#4106" class="Function">freshVar-≥</a> <a id="4643" class="Symbol">{</a><a id="4644" class="Argument">Γ</a> <a id="4646" class="Symbol">=</a> <a id="4648" href="FOL.Syntax.FreshVariables.html#4610" class="Bound">φ</a> <a id="4650" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4652" href="FOL.Syntax.FreshVariables.html#4612" class="Bound">Γ</a><a id="4653" class="Symbol">}</a> <a id="4655" class="Symbol">(</a><a id="4656" href="Data.List.Relation.Unary.Any.html#1226" class="InductiveConstructor">here</a> <a id="4661" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="4665" class="Symbol">))</a>

<a id="freshVar∷-fresh"></a><a id="4669" href="FOL.Syntax.FreshVariables.html#4669" class="Function">freshVar∷-fresh</a> <a id="4685" class="Symbol">:</a> <a id="4687" class="Symbol">∀</a> <a id="4689" href="FOL.Syntax.FreshVariables.html#4689" class="Bound">φ</a> <a id="4691" href="FOL.Syntax.FreshVariables.html#4691" class="Bound">Γ</a> <a id="4693" class="Symbol">→</a> <a id="4695" href="FOL.Syntax.FreshVariables.html#1760" class="Function">fresh</a> <a id="4701" class="Symbol">(</a><a id="4702" href="FOL.Syntax.FreshVariables.html#4033" class="Function">freshVar</a> <a id="4711" class="Symbol">(</a><a id="4712" href="FOL.Syntax.FreshVariables.html#4689" class="Bound">φ</a> <a id="4714" class="InductiveConstructor Operator">∷</a> <a id="4716" href="FOL.Syntax.FreshVariables.html#4691" class="Bound">Γ</a><a id="4717" class="Symbol">))</a> <a id="4720" href="FOL.Syntax.FreshVariables.html#4691" class="Bound">Γ</a>
<a id="4722" href="FOL.Syntax.FreshVariables.html#4669" class="Function">freshVar∷-fresh</a> <a id="4738" href="FOL.Syntax.FreshVariables.html#4738" class="Bound">φ</a> <a id="4740" href="FOL.Syntax.FreshVariables.html#4740" class="Bound">Γ</a> <a id="4742" href="FOL.Syntax.FreshVariables.html#4742" class="Bound">H</a> <a id="4744" class="Symbol">=</a> <a id="4746" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="4754" class="Symbol">_</a> <a id="4756" class="Symbol">.</a><a id="4757" href="Agda.Builtin.Sigma.html#263" class="Field">snd</a> <a id="4761" class="Symbol">(</a><a id="4762" href="FOL.Syntax.FreshVariables.html#4106" class="Function">freshVar-≥</a> <a id="4773" class="Symbol">{</a><a id="4774" class="Argument">Γ</a> <a id="4776" class="Symbol">=</a> <a id="4778" href="FOL.Syntax.FreshVariables.html#4738" class="Bound">φ</a> <a id="4780" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4782" href="FOL.Syntax.FreshVariables.html#4740" class="Bound">Γ</a><a id="4783" class="Symbol">}</a> <a id="4785" class="Symbol">(</a><a id="4786" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="4792" href="FOL.Syntax.FreshVariables.html#4742" class="Bound">H</a><a id="4793" class="Symbol">))</a>
</pre>
<h2 id="闭公式">闭公式</h2>
<p><strong><u>定义</u></strong> 公式 <code>φ</code> 的 <code>n</code> 次全称量化记作 <code>∀̇ⁿ n φ</code>.</p>
<pre class="Agda"><a id="∀̇ⁿ"></a><a id="4864" href="FOL.Syntax.FreshVariables.html#4864" class="Function">∀̇ⁿ</a> <a id="4868" class="Symbol">:</a> <a id="4870" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="4872" class="Symbol">→</a> <a id="4874" href="FOL.Syntax.Base.html#3791" class="Datatype">Formula</a> <a id="4882" class="Symbol">→</a> <a id="4884" href="FOL.Syntax.Base.html#3791" class="Datatype">Formula</a>
<a id="4892" href="FOL.Syntax.FreshVariables.html#4864" class="Function">∀̇ⁿ</a> <a id="4896" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="4901" class="Symbol">=</a> <a id="4903" href="Function.Base.html#704" class="Function">id</a>
<a id="4906" href="FOL.Syntax.FreshVariables.html#4864" class="Function">∀̇ⁿ</a> <a id="4910" class="Symbol">(</a><a id="4911" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="4915" href="FOL.Syntax.FreshVariables.html#4915" class="Bound">n</a><a id="4916" class="Symbol">)</a> <a id="4918" href="FOL.Syntax.FreshVariables.html#4918" class="Bound">φ</a> <a id="4920" class="Symbol">=</a> <a id="4922" href="FOL.Syntax.Base.html#3863" class="InductiveConstructor Operator">∀̇</a> <a id="4925" class="Symbol">(</a><a id="4926" href="FOL.Syntax.FreshVariables.html#4864" class="Function">∀̇ⁿ</a> <a id="4930" href="FOL.Syntax.FreshVariables.html#4915" class="Bound">n</a> <a id="4932" href="FOL.Syntax.FreshVariables.html#4918" class="Bound">φ</a><a id="4933" class="Symbol">)</a>
</pre>
<p><strong><u>引理</u></strong> 如果 <code>n</code> 是 <code>φ</code> 的新变元, 那么 <code>n ∸ m</code> 是 <code>∀̇ⁿ m φ</code> 的新变元.<br />
<strong><u>证明</u></strong> 归纳 <code>m</code>. - 当 <code>m</code> 是 <code>zero</code> 时, 由前提 <code>n</code> 是 <code>φ</code> 的新变元, 所以 <code>n ∸ zero ≡ n</code> 是 <code>∀̇ⁿ zero φ ≡ φ</code> 的新变元. - 当 <code>m</code> 是 <code>suc m</code> 时, 由归纳假设有 <code>n ∸ m</code> 是 <code>∀̇ⁿ m φ</code> 的新变元, 所以 <code>n ∸ suc m ≡ (n ∸ m) ∸ 1</code> 是 <code>∀̇ⁿ (suc m) φ ≡ ∀̇ (∀̇ⁿ m φ)</code> 的新变元. ∎</p>
<pre class="Agda"><a id="∀̇ⁿ-freshᵩFrom"></a><a id="5242" href="FOL.Syntax.FreshVariables.html#5242" class="Function">∀̇ⁿ-freshᵩFrom</a> <a id="5257" class="Symbol">:</a> <a id="5259" class="Symbol">∀</a> <a id="5261" href="FOL.Syntax.FreshVariables.html#5261" class="Bound">n</a> <a id="5263" href="FOL.Syntax.FreshVariables.html#5263" class="Bound">m</a> <a id="5265" href="FOL.Syntax.FreshVariables.html#5265" class="Bound">φ</a> <a id="5267" class="Symbol">→</a> <a id="5269" href="FOL.Syntax.FreshVariables.html#2016" class="Function">freshᵩFrom</a> <a id="5280" href="FOL.Syntax.FreshVariables.html#5261" class="Bound">n</a> <a id="5282" href="FOL.Syntax.FreshVariables.html#5265" class="Bound">φ</a> <a id="5284" class="Symbol">→</a> <a id="5286" href="FOL.Syntax.FreshVariables.html#2016" class="Function">freshᵩFrom</a> <a id="5297" class="Symbol">(</a><a id="5298" href="FOL.Syntax.FreshVariables.html#5261" class="Bound">n</a> <a id="5300" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5302" href="FOL.Syntax.FreshVariables.html#5263" class="Bound">m</a><a id="5303" class="Symbol">)</a> <a id="5305" class="Symbol">(</a><a id="5306" href="FOL.Syntax.FreshVariables.html#4864" class="Function">∀̇ⁿ</a> <a id="5310" href="FOL.Syntax.FreshVariables.html#5263" class="Bound">m</a> <a id="5312" href="FOL.Syntax.FreshVariables.html#5265" class="Bound">φ</a><a id="5313" class="Symbol">)</a>
<a id="5315" href="FOL.Syntax.FreshVariables.html#5242" class="Function">∀̇ⁿ-freshᵩFrom</a> <a id="5330" href="FOL.Syntax.FreshVariables.html#5330" class="Bound">n</a> <a id="5332" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="5337" href="FOL.Syntax.FreshVariables.html#5337" class="Bound">φ</a> <a id="5339" href="FOL.Syntax.FreshVariables.html#5339" class="Bound">H</a> <a id="5341" class="Symbol">=</a> <a id="5343" href="FOL.Syntax.FreshVariables.html#5339" class="Bound">H</a>
<a id="5345" href="FOL.Syntax.FreshVariables.html#5242" class="Function">∀̇ⁿ-freshᵩFrom</a> <a id="5360" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5362" class="Symbol">(</a><a id="5363" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5367" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a><a id="5368" class="Symbol">)</a> <a id="5370" href="FOL.Syntax.FreshVariables.html#5370" class="Bound">φ</a> <a id="5372" href="FOL.Syntax.FreshVariables.html#5372" class="Bound">H</a> <a id="5374" href="FOL.Syntax.FreshVariables.html#5374" class="Bound">n∸sm≤k</a> <a id="5381" class="Symbol">=</a> <a id="5383" href="FOL.Syntax.FreshVariables.html#1230" class="InductiveConstructor">fresh∀̇</a> <a id="5391" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5393" href="FOL.Syntax.FreshVariables.html#5242" class="Function">∀̇ⁿ-freshᵩFrom</a> <a id="5408" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5410" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a> <a id="5412" href="FOL.Syntax.FreshVariables.html#5370" class="Bound">φ</a> <a id="5414" href="FOL.Syntax.FreshVariables.html#5372" class="Bound">H</a> <a id="5416" href="FOL.Syntax.FreshVariables.html#5431" class="Function">n∸m≤sk</a> <a id="5423" class="Keyword">where</a>
  <a id="5431" href="FOL.Syntax.FreshVariables.html#5431" class="Function">n∸m≤sk</a> <a id="5438" class="Symbol">:</a> <a id="5440" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5442" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5444" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a> <a id="5446" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤</a> <a id="5448" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5452" class="Symbol">_</a>
  <a id="5456" href="FOL.Syntax.FreshVariables.html#5431" class="Function">n∸m≤sk</a> <a id="5463" class="Symbol">=</a> <a id="5465" href="Data.Nat.Properties.html#5682" class="Function">≤-trans</a> <a id="5473" href="FOL.Syntax.FreshVariables.html#5507" class="Function">le</a> <a id="5476" class="Symbol">(</a><a id="5477" href="Data.Nat.Properties.html#19404" class="Function">+-monoʳ-≤</a> <a id="5487" class="Number">1</a> <a id="5489" href="FOL.Syntax.FreshVariables.html#5374" class="Bound">n∸sm≤k</a><a id="5495" class="Symbol">)</a> <a id="5497" class="Keyword">where</a>
    <a id="5507" href="FOL.Syntax.FreshVariables.html#5507" class="Function">le</a> <a id="5510" class="Symbol">:</a> <a id="5512" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5514" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5516" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a> <a id="5518" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤</a> <a id="5520" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5524" class="Symbol">(</a><a id="5525" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5527" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5529" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5533" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a><a id="5534" class="Symbol">)</a>
    <a id="5540" href="FOL.Syntax.FreshVariables.html#5507" class="Function">le</a> <a id="5543" class="Symbol">=</a> <a id="5545" href="Foundation.Prelude.Equality.html#1375" class="Function">subst</a> <a id="5551" class="Symbol">(</a><a id="5552" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5554" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5556" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a> <a id="5558" href="Data.Nat.Base.html#1640" class="Datatype Operator">≤_</a><a id="5560" class="Symbol">)</a> <a id="5562" class="Symbol">(</a><a id="5563" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="5568" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5572" href="FOL.Syntax.FreshVariables.html#5608" class="Function">eq</a><a id="5574" class="Symbol">)</a> <a id="5576" class="Symbol">(</a><a id="5577" href="Data.Nat.Properties.html#49958" class="Function">m≤n+m∸n</a> <a id="5585" class="Symbol">(</a><a id="5586" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5588" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5590" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a><a id="5591" class="Symbol">)</a> <a id="5593" class="Number">1</a><a id="5594" class="Symbol">)</a> <a id="5596" class="Keyword">where</a>
      <a id="5608" href="FOL.Syntax.FreshVariables.html#5608" class="Function">eq</a> <a id="5611" class="Symbol">=</a> <a id="5613" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5615" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5617" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5621" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a>    <a id="5626" href="Foundation.Prelude.Equality.html#1089" class="Function Operator">≡⟨</a> <a id="5629" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="5634" class="Symbol">(</a><a id="5635" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5637" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸_</a><a id="5639" class="Symbol">)</a> <a id="5641" class="Symbol">(</a><a id="5642" href="Data.Nat.Properties.html#15204" class="Function">+-comm</a> <a id="5649" class="Number">1</a> <a id="5651" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a><a id="5652" class="Symbol">)</a> <a id="5654" href="Foundation.Prelude.Equality.html#1089" class="Function Operator">⟩</a>
           <a id="5667" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5669" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5671" class="Symbol">(</a><a id="5672" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a> <a id="5674" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="5676" class="Number">1</a><a id="5677" class="Symbol">)</a>  <a id="5680" href="Foundation.Prelude.Equality.html#1160" class="Function Operator">≡˘⟨</a> <a id="5684" href="Data.Nat.Properties.html#49032" class="Function">∸-+-assoc</a> <a id="5694" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5696" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a> <a id="5698" class="Number">1</a> <a id="5700" href="Foundation.Prelude.Equality.html#1160" class="Function Operator">⟩</a>
           <a id="5713" href="FOL.Syntax.FreshVariables.html#5360" class="Bound">n</a> <a id="5715" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5717" href="FOL.Syntax.FreshVariables.html#5367" class="Bound">m</a> <a id="5719" href="Data.Nat.Base.html#3308" class="Primitive Operator">∸</a> <a id="5721" class="Number">1</a>    <a id="5726" href="Foundation.Prelude.Equality.html#1248" class="Function Operator">∎</a>
</pre>
<p><strong><u>定义</u></strong> <code>0</code> 是其新变元 (即没有未使用变元) 的公式叫做闭公式.</p>
<pre class="Agda"><a id="closed"></a><a id="5787" href="FOL.Syntax.FreshVariables.html#5787" class="Function">closed</a> <a id="5794" class="Symbol">:</a> <a id="5796" href="FOL.Syntax.Base.html#3791" class="Datatype">Formula</a> <a id="5804" class="Symbol">→</a> <a id="5806" href="Agda.Primitive.html#388" class="Primitive">𝕋</a>
<a id="5808" href="FOL.Syntax.FreshVariables.html#5787" class="Function">closed</a> <a id="5815" class="Symbol">=</a> <a id="5817" href="FOL.Syntax.FreshVariables.html#2016" class="Function">freshᵩFrom</a> <a id="5828" class="Number">0</a>
</pre>
<p><strong><u>定义</u></strong> 给定公式 <code>φ</code>, 取其新变元 <code>n</code>, 对 <code>φ</code> 做 <code>n</code> 次全称量化, 得到的公式叫做 <code>φ</code> 的闭公式, 记作 <code>close φ</code>.</p>
<pre class="Agda"><a id="close"></a><a id="5930" href="FOL.Syntax.FreshVariables.html#5930" class="Function">close</a> <a id="5936" class="Symbol">:</a> <a id="5938" href="FOL.Syntax.Base.html#3791" class="Datatype">Formula</a> <a id="5946" class="Symbol">→</a> <a id="5948" href="FOL.Syntax.Base.html#3791" class="Datatype">Formula</a>
<a id="5956" href="FOL.Syntax.FreshVariables.html#5930" class="Function">close</a> <a id="5962" href="FOL.Syntax.FreshVariables.html#5962" class="Bound">φ</a> <a id="5964" class="Symbol">=</a> <a id="5966" href="FOL.Syntax.FreshVariables.html#4864" class="Function">∀̇ⁿ</a> <a id="5970" class="Symbol">(</a><a id="5971" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="5979" href="FOL.Syntax.FreshVariables.html#5962" class="Bound">φ</a> <a id="5981" class="Symbol">.</a><a id="5982" href="Agda.Builtin.Sigma.html#251" class="Field">fst</a><a id="5985" class="Symbol">)</a> <a id="5987" href="FOL.Syntax.FreshVariables.html#5962" class="Bound">φ</a>
</pre>
<p><strong><u>定理</u></strong> 对任意 <code>φ</code>, <code>close φ</code> 是闭公式.<br />
<strong><u>证明</u></strong> 取 <code>φ</code> 的新变元 <code>n</code>, 由引理 <code>∀̇ⁿ-freshᵩFrom</code>, <code>close φ</code> 的新变元是 <code>n ∸ n ≡ 0</code>, 所以 <code>close φ</code> 是闭公式. ∎</p>
<pre class="Agda"><a id="close-closed"></a><a id="6146" href="FOL.Syntax.FreshVariables.html#6146" class="Function">close-closed</a> <a id="6159" class="Symbol">:</a> <a id="6161" class="Symbol">∀</a> <a id="6163" href="FOL.Syntax.FreshVariables.html#6163" class="Bound">φ</a> <a id="6165" class="Symbol">→</a> <a id="6167" href="FOL.Syntax.FreshVariables.html#5787" class="Function">closed</a> <a id="6174" class="Symbol">(</a><a id="6175" href="FOL.Syntax.FreshVariables.html#5930" class="Function">close</a> <a id="6181" href="FOL.Syntax.FreshVariables.html#6163" class="Bound">φ</a><a id="6182" class="Symbol">)</a>
<a id="6184" href="FOL.Syntax.FreshVariables.html#6146" class="Function">close-closed</a> <a id="6197" href="FOL.Syntax.FreshVariables.html#6197" class="Bound">φ</a> <a id="6199" class="Symbol">{</a><a id="6200" href="FOL.Syntax.FreshVariables.html#6200" class="Bound">m</a><a id="6201" class="Symbol">}</a> <a id="6203" class="Symbol">_</a> <a id="6205" class="Keyword">with</a> <a id="6210" href="FOL.Syntax.FreshVariables.html#3510" class="Function">Σfreshᵩ</a> <a id="6218" href="FOL.Syntax.FreshVariables.html#6197" class="Bound">φ</a>
<a id="6220" class="Symbol">...</a> <a id="6224" class="Symbol">|</a> <a id="6226" href="FOL.Syntax.FreshVariables.html#6226" class="Bound">n</a> <a id="6228" href="Foundation.Prelude.Builtin.html#870" class="InductiveConstructor Operator">,</a> <a id="6230" href="FOL.Syntax.FreshVariables.html#6230" class="Bound">Hn</a> <a id="6233" class="Symbol">=</a> <a id="6235" href="FOL.Syntax.FreshVariables.html#5242" class="Function">∀̇ⁿ-freshᵩFrom</a> <a id="6250" href="FOL.Syntax.FreshVariables.html#6226" class="Bound">n</a> <a id="6252" href="FOL.Syntax.FreshVariables.html#6226" class="Bound">n</a> <a id="6254" class="Bound">φ</a> <a id="6256" href="FOL.Syntax.FreshVariables.html#6230" class="Bound">Hn</a> <a id="6259" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6261" href="Foundation.Prelude.Equality.html#1375" class="Function">subst</a> <a id="6267" class="Symbol">(</a><a id="6268" href="Data.Nat.Base.html#1640" class="Datatype Operator">_≤</a> <a id="6271" class="Bound">m</a><a id="6272" class="Symbol">)</a> <a id="6274" class="Symbol">(</a><a id="6275" href="Data.Nat.Properties.html#45405" class="Function">n∸n≡0</a> <a id="6281" href="FOL.Syntax.FreshVariables.html#6226" class="Bound">n</a><a id="6282" class="Symbol">)</a> <a id="6284" href="Data.Nat.Base.html#1663" class="InductiveConstructor">z≤n</a>
</pre>
<p><strong><u>定义</u></strong> 由闭公式组成的理论叫做闭理论.</p>
<pre class="Agda"><a id="closedᵀ"></a><a id="6332" href="FOL.Syntax.FreshVariables.html#6332" class="Function">closedᵀ</a> <a id="6340" class="Symbol">:</a> <a id="6342" href="FOL.Syntax.Base.html#4807" class="Function">Theory</a> <a id="6349" class="Symbol">→</a> <a id="6351" href="Agda.Primitive.html#388" class="Primitive">𝕋</a>
<a id="6353" href="FOL.Syntax.FreshVariables.html#6332" class="Function">closedᵀ</a> <a id="6361" href="FOL.Syntax.FreshVariables.html#6361" class="Bound">𝒯</a> <a id="6363" class="Symbol">=</a> <a id="6365" class="Symbol">∀</a> <a id="6367" class="Symbol">{</a><a id="6368" href="FOL.Syntax.FreshVariables.html#6368" class="Bound">φ</a><a id="6369" class="Symbol">}</a> <a id="6371" class="Symbol">→</a> <a id="6373" href="FOL.Syntax.FreshVariables.html#6368" class="Bound">φ</a> <a id="6375" href="Foundation.Set.Powerset.html#705" class="Function Operator">∈</a> <a id="6377" href="FOL.Syntax.FreshVariables.html#6361" class="Bound">𝒯</a> <a id="6379" class="Symbol">→</a> <a id="6381" href="FOL.Syntax.FreshVariables.html#5787" class="Function">closed</a> <a id="6388" href="FOL.Syntax.FreshVariables.html#6368" class="Bound">φ</a>

<a id="ClosedTheory"></a><a id="6391" href="FOL.Syntax.FreshVariables.html#6391" class="Function">ClosedTheory</a> <a id="6404" class="Symbol">:</a> <a id="6406" href="Agda.Primitive.html#388" class="Primitive">𝕋₁</a>
<a id="6409" href="FOL.Syntax.FreshVariables.html#6391" class="Function">ClosedTheory</a> <a id="6422" class="Symbol">=</a> <a id="6424" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="6426" href="FOL.Syntax.Base.html#4807" class="Function">Theory</a> <a id="6433" href="FOL.Syntax.FreshVariables.html#6332" class="Function">closedᵀ</a>
</pre>
<h2 id="命题性">命题性</h2>
<p><strong><u>事实</u></strong> “是闭公式” 和 “是闭理论” 是谓词.<br />
<strong><u>证明</u></strong> 根源在于 <code>fresh#</code> 的前提 <code>n ≢ m</code>, 也即 <code>⊥</code> 的命题性. 分别对 <code>freshₜ</code> 和 <code>fresh</code> 归纳即得. ∎</p>
<pre class="Agda"><a id="isPropFreshₜ"></a><a id="6585" href="FOL.Syntax.FreshVariables.html#6585" class="Function">isPropFreshₜ</a> <a id="6598" class="Symbol">:</a> <a id="6600" class="Symbol">∀</a> <a id="6602" href="FOL.Syntax.FreshVariables.html#6602" class="Bound">t</a> <a id="6604" class="Symbol">→</a> <a id="6606" href="Foundation.Prelude.HLevel.html#555" class="Function">isProp</a> <a id="6613" class="Symbol">(</a><a id="6614" href="FOL.Syntax.FreshVariables.html#528" class="Datatype">freshₜ</a> <a id="6621" href="FOL.Syntax.FreshVariables.html#339" class="Generalizable">n</a> <a id="6623" href="FOL.Syntax.FreshVariables.html#6602" class="Bound">t</a><a id="6624" class="Symbol">)</a>
<a id="6626" href="FOL.Syntax.FreshVariables.html#6585" class="Function">isPropFreshₜ</a> <a id="6639" class="Symbol">=</a> <a id="6641" href="FOL.Syntax.Base.html#1264" class="Function">term-elim</a>
  <a id="6653" class="Symbol">(λ</a> <a id="6656" class="Symbol">{</a> <a id="6658" class="Symbol">_</a> <a id="6660" class="Symbol">(</a><a id="6661" href="FOL.Syntax.FreshVariables.html#562" class="InductiveConstructor">fresh#</a> <a id="6668" href="FOL.Syntax.FreshVariables.html#6668" class="Bound">p</a><a id="6669" class="Symbol">)</a> <a id="6671" class="Symbol">(</a><a id="6672" href="FOL.Syntax.FreshVariables.html#562" class="InductiveConstructor">fresh#</a> <a id="6679" href="FOL.Syntax.FreshVariables.html#6679" class="Bound">q</a><a id="6680" class="Symbol">)</a> <a id="6682" class="Symbol">→</a> <a id="6684" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="6689" href="FOL.Syntax.FreshVariables.html#562" class="InductiveConstructor">fresh#</a> <a id="6696" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6698" href="Foundation.Relation.Nullary.Negation.html#570" class="Function">isProp¬</a> <a id="6706" href="FOL.Syntax.FreshVariables.html#6668" class="Bound">p</a> <a id="6708" href="FOL.Syntax.FreshVariables.html#6679" class="Bound">q</a> <a id="6710" class="Symbol">})</a>
  <a id="6715" class="Symbol">(λ</a> <a id="6718" class="Symbol">{</a> <a id="6720" href="FOL.Syntax.FreshVariables.html#6720" class="Bound">f</a> <a id="6722" href="FOL.Syntax.FreshVariables.html#6722" class="Bound">t⃗</a> <a id="6725" href="FOL.Syntax.FreshVariables.html#6725" class="Bound">IH</a> <a id="6728" class="Symbol">(</a><a id="6729" href="FOL.Syntax.FreshVariables.html#604" class="InductiveConstructor">fresh$̇</a> <a id="6737" href="FOL.Syntax.FreshVariables.html#6737" class="Bound">p</a><a id="6738" class="Symbol">)</a> <a id="6740" class="Symbol">(</a><a id="6741" href="FOL.Syntax.FreshVariables.html#604" class="InductiveConstructor">fresh$̇</a> <a id="6749" href="FOL.Syntax.FreshVariables.html#6749" class="Bound">q</a><a id="6750" class="Symbol">)</a> <a id="6752" class="Symbol">→</a> <a id="6754" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="6759" href="FOL.Syntax.FreshVariables.html#604" class="InductiveConstructor">fresh$̇</a> <a id="6767" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6769" href="Foundation.Prelude.HLevel.html#2733" class="Function">isPropΠ2</a> <a id="6778" href="FOL.Syntax.FreshVariables.html#6725" class="Bound">IH</a> <a id="6781" href="FOL.Syntax.FreshVariables.html#6737" class="Bound">p</a> <a id="6783" href="FOL.Syntax.FreshVariables.html#6749" class="Bound">q</a> <a id="6785" class="Symbol">})</a>

<a id="isPropFreshᵩ"></a><a id="6789" href="FOL.Syntax.FreshVariables.html#6789" class="Function">isPropFreshᵩ</a> <a id="6802" class="Symbol">:</a> <a id="6804" class="Symbol">∀</a> <a id="6806" class="Symbol">{</a><a id="6807" href="FOL.Syntax.FreshVariables.html#6807" class="Bound">φ</a><a id="6808" class="Symbol">}</a> <a id="6810" class="Symbol">→</a> <a id="6812" href="Foundation.Prelude.HLevel.html#555" class="Function">isProp</a> <a id="6819" class="Symbol">(</a><a id="6820" href="FOL.Syntax.FreshVariables.html#1103" class="Datatype">freshᵩ</a> <a id="6827" href="FOL.Syntax.FreshVariables.html#339" class="Generalizable">n</a> <a id="6829" href="FOL.Syntax.FreshVariables.html#6807" class="Bound">φ</a><a id="6830" class="Symbol">)</a>
<a id="6832" href="FOL.Syntax.FreshVariables.html#6789" class="Function">isPropFreshᵩ</a> <a id="6845" class="Symbol">{</a><a id="6846" class="Argument">φ</a> <a id="6848" class="Symbol">=</a> <a id="6850" href="FOL.Syntax.Base.html#3811" class="InductiveConstructor">⊥̇</a><a id="6852" class="Symbol">}</a> <a id="6854" href="FOL.Syntax.FreshVariables.html#1140" class="InductiveConstructor">fresh⊥̇</a> <a id="6862" href="FOL.Syntax.FreshVariables.html#1140" class="InductiveConstructor">fresh⊥̇</a> <a id="6870" class="Symbol">=</a> <a id="6872" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="6877" href="FOL.Syntax.FreshVariables.html#6789" class="Function">isPropFreshᵩ</a> <a id="6890" class="Symbol">{</a><a id="6891" class="Argument">φ</a> <a id="6893" class="Symbol">=</a> <a id="6895" class="Symbol">_</a> <a id="6897" href="FOL.Syntax.Base.html#3826" class="InductiveConstructor Operator">→̇</a> <a id="6900" class="Symbol">_}</a> <a id="6903" class="Symbol">(</a><a id="6904" href="FOL.Syntax.FreshVariables.html#1164" class="InductiveConstructor">fresh→̇</a> <a id="6912" href="FOL.Syntax.FreshVariables.html#6912" class="Bound">p₁</a> <a id="6915" href="FOL.Syntax.FreshVariables.html#6915" class="Bound">p₂</a><a id="6917" class="Symbol">)</a> <a id="6919" class="Symbol">(</a><a id="6920" href="FOL.Syntax.FreshVariables.html#1164" class="InductiveConstructor">fresh→̇</a> <a id="6928" href="FOL.Syntax.FreshVariables.html#6928" class="Bound">q₁</a> <a id="6931" href="FOL.Syntax.FreshVariables.html#6931" class="Bound">q₂</a><a id="6933" class="Symbol">)</a> <a id="6935" class="Symbol">=</a> <a id="6937" href="Foundation.Prelude.Equality.html#1281" class="Function">cong2</a> <a id="6943" href="FOL.Syntax.FreshVariables.html#1164" class="InductiveConstructor">fresh→̇</a> <a id="6951" class="Symbol">(</a><a id="6952" href="FOL.Syntax.FreshVariables.html#6789" class="Function">isPropFreshᵩ</a> <a id="6965" href="FOL.Syntax.FreshVariables.html#6912" class="Bound">p₁</a> <a id="6968" href="FOL.Syntax.FreshVariables.html#6928" class="Bound">q₁</a><a id="6970" class="Symbol">)</a> <a id="6972" class="Symbol">(</a><a id="6973" href="FOL.Syntax.FreshVariables.html#6789" class="Function">isPropFreshᵩ</a> <a id="6986" href="FOL.Syntax.FreshVariables.html#6915" class="Bound">p₂</a> <a id="6989" href="FOL.Syntax.FreshVariables.html#6931" class="Bound">q₂</a><a id="6991" class="Symbol">)</a>
<a id="6993" href="FOL.Syntax.FreshVariables.html#6789" class="Function">isPropFreshᵩ</a> <a id="7006" class="Symbol">{</a><a id="7007" class="Argument">φ</a> <a id="7009" class="Symbol">=</a> <a id="7011" href="FOL.Syntax.Base.html#3863" class="InductiveConstructor Operator">∀̇</a> <a id="7014" class="Symbol">_}</a> <a id="7017" class="Symbol">(</a><a id="7018" href="FOL.Syntax.FreshVariables.html#1230" class="InductiveConstructor">fresh∀̇</a> <a id="7026" href="FOL.Syntax.FreshVariables.html#7026" class="Bound">p</a><a id="7027" class="Symbol">)</a> <a id="7029" class="Symbol">(</a><a id="7030" href="FOL.Syntax.FreshVariables.html#1230" class="InductiveConstructor">fresh∀̇</a> <a id="7038" href="FOL.Syntax.FreshVariables.html#7038" class="Bound">q</a><a id="7039" class="Symbol">)</a> <a id="7041" class="Symbol">=</a> <a id="7043" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="7048" href="FOL.Syntax.FreshVariables.html#1230" class="InductiveConstructor">fresh∀̇</a> <a id="7056" class="Symbol">(</a><a id="7057" href="FOL.Syntax.FreshVariables.html#6789" class="Function">isPropFreshᵩ</a> <a id="7070" href="FOL.Syntax.FreshVariables.html#7026" class="Bound">p</a> <a id="7072" href="FOL.Syntax.FreshVariables.html#7038" class="Bound">q</a><a id="7073" class="Symbol">)</a>
<a id="7075" href="FOL.Syntax.FreshVariables.html#6789" class="Function">isPropFreshᵩ</a> <a id="7088" class="Symbol">{</a><a id="7089" class="Argument">φ</a> <a id="7091" class="Symbol">=</a> <a id="7093" class="Symbol">_</a> <a id="7095" href="FOL.Syntax.Base.html#3889" class="InductiveConstructor Operator">$̇</a> <a id="7098" class="Symbol">_}</a> <a id="7101" class="Symbol">(</a><a id="7102" href="FOL.Syntax.FreshVariables.html#1285" class="InductiveConstructor">fresh$̇</a> <a id="7110" href="FOL.Syntax.FreshVariables.html#7110" class="Bound">p</a><a id="7111" class="Symbol">)</a> <a id="7113" class="Symbol">(</a><a id="7114" href="FOL.Syntax.FreshVariables.html#1285" class="InductiveConstructor">fresh$̇</a> <a id="7122" href="FOL.Syntax.FreshVariables.html#7122" class="Bound">q</a><a id="7123" class="Symbol">)</a> <a id="7125" class="Symbol">=</a> <a id="7127" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="7132" href="FOL.Syntax.FreshVariables.html#1285" class="InductiveConstructor">fresh$̇</a> <a id="7140" class="Symbol">(</a><a id="7141" href="Foundation.Prelude.HLevel.html#2733" class="Function">isPropΠ2</a> <a id="7150" class="Symbol">(λ</a> <a id="7153" href="FOL.Syntax.FreshVariables.html#7153" class="Bound">t</a> <a id="7155" href="FOL.Syntax.FreshVariables.html#7155" class="Bound">_</a> <a id="7157" class="Symbol">→</a> <a id="7159" href="FOL.Syntax.FreshVariables.html#6585" class="Function">isPropFreshₜ</a> <a id="7172" href="FOL.Syntax.FreshVariables.html#7153" class="Bound">t</a><a id="7173" class="Symbol">)</a> <a id="7175" href="FOL.Syntax.FreshVariables.html#7110" class="Bound">p</a> <a id="7177" href="FOL.Syntax.FreshVariables.html#7122" class="Bound">q</a><a id="7178" class="Symbol">)</a>

<a id="isPropClosed"></a><a id="7181" href="FOL.Syntax.FreshVariables.html#7181" class="Function">isPropClosed</a> <a id="7194" class="Symbol">:</a> <a id="7196" href="Foundation.Prelude.HLevel.html#555" class="Function">isProp</a> <a id="7203" class="Symbol">(</a><a id="7204" href="FOL.Syntax.FreshVariables.html#5787" class="Function">closed</a> <a id="7211" href="FOL.Syntax.Base.html#5232" class="Generalizable">φ</a><a id="7212" class="Symbol">)</a>
<a id="7214" href="FOL.Syntax.FreshVariables.html#7181" class="Function">isPropClosed</a> <a id="7227" class="Symbol">=</a> <a id="7229" href="Foundation.Prelude.HLevel.html#2835" class="Function">isPropΠ̅</a> <a id="7238" class="Symbol">λ</a> <a id="7240" href="FOL.Syntax.FreshVariables.html#7240" class="Bound">_</a> <a id="7242" class="Symbol">→</a> <a id="7244" href="Foundation.Prelude.HLevel.html#3344" class="Function">isProp→</a> <a id="7252" href="FOL.Syntax.FreshVariables.html#6789" class="Function">isPropFreshᵩ</a>

<a id="isPropClosedᵀ"></a><a id="7266" href="FOL.Syntax.FreshVariables.html#7266" class="Function">isPropClosedᵀ</a> <a id="7280" class="Symbol">:</a> <a id="7282" href="Foundation.Prelude.HLevel.html#555" class="Function">isProp</a> <a id="7289" class="Symbol">(</a><a id="7290" href="FOL.Syntax.FreshVariables.html#6332" class="Function">closedᵀ</a> <a id="7298" href="FOL.Syntax.Base.html#5266" class="Generalizable">𝒯</a><a id="7299" class="Symbol">)</a>
<a id="7301" href="FOL.Syntax.FreshVariables.html#7266" class="Function">isPropClosedᵀ</a> <a id="7315" class="Symbol">=</a> <a id="7317" href="Foundation.Prelude.HLevel.html#2835" class="Function">isPropΠ̅</a> <a id="7326" class="Symbol">λ</a> <a id="7328" href="FOL.Syntax.FreshVariables.html#7328" class="Bound">_</a> <a id="7330" class="Symbol">→</a> <a id="7332" href="Foundation.Prelude.HLevel.html#2642" class="Function">isPropΠ</a> <a id="7340" class="Symbol">λ</a> <a id="7342" href="FOL.Syntax.FreshVariables.html#7342" class="Bound">_</a> <a id="7344" class="Symbol">→</a> <a id="7346" href="FOL.Syntax.FreshVariables.html#7181" class="Function">isPropClosed</a>
</pre>
<hr />
<blockquote>
<p>知识共享许可协议: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC-BY-NC-SA 4.0</a><br />
<a href="https://github.com/choukh/MetaLogic/blob/main/src/FOL/Syntax/FreshVariables.lagda.md">GitHub</a> | <a href="https://choukh.github.io/MetaLogic/FOL.Syntax.FreshVariables.html">GitHub Pages</a> | <a href="https://www.yuque.com/ocau/metalogic/fol.syntax.fresh">语雀</a><br />
交流Q群: 893531731</p>
</blockquote>
</main>

<script>
;(function() {
  // Non-essential if user has JavaScript off. Just makes checkboxes look nicer.
  var selector = '.task-list > li > input[type="checkbox"]';
  var checkboxes = document.querySelectorAll(selector);
  Array.from(checkboxes).forEach((checkbox) => {
    var wasChecked = checkbox.checked;
    checkbox.disabled = false;
    checkbox.addEventListener('click', (ev) => {ev.target.checked = wasChecked});
  });
})();
</script>
</body>
</html>
