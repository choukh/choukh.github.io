<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Agda一阶逻辑(1) 签名与结构</title>
  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/skylighting-solarized-theme.css" />
  <script type="text/javascript" src="highlight-hover.js"></script>
  <script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
</head>
<body>

<header>
<h1 class="title">Agda一阶逻辑(1) 签名与结构</h1>
<blockquote class="metadata">
</blockquote>
</header>

<nav id="TOC" role="doc-toc">
    <strong>Contents</strong><label for="contents">⊕</label>
  <input type="checkbox" id="contents">
  <ul>
  <li><a href="#agda一阶逻辑1-签名与结构" id="toc-agda一阶逻辑1-签名与结构">Agda一阶逻辑(1) 签名与结构</a>
  <ul>
  <li><a href="#前言" id="toc-前言">前言</a></li>
  <li><a href="#签名" id="toc-签名">签名</a></li>
  <li><a href="#结构" id="toc-结构">结构</a></li>
  </ul></li>
  </ul>
</nav>

<main>
<h1 id="agda一阶逻辑1-签名与结构">Agda一阶逻辑(1) 签名与结构</h1>
<blockquote>
<p>交流Q群: 893531731<br />
本文源码: <a href="https://github.com/choukh/agda-flypitch/blob/main/src/FOL/Dependency.lagda.md">Dependency.lagda.md</a><br />
高亮渲染: <a href="https://choukh.github.io/agda-flypitch/FOL.Dependency.html">Dependency.html</a></p>
</blockquote>
<h2 id="前言">前言</h2>
<p>一阶逻辑是一种形式语言, 其语句由一些原始符号按一定的语法组合而成. 符号又分为逻辑符号和非逻辑符号. 本篇先讲非逻辑符号.</p>
<p>非逻辑符号分为函数符号和关系符号, 且它们都带有一个称为元数 (arity) 的属性. 例如, 元数为 2 的函数符号即用于表示二元函数. 特别地, 元数为零的函数又称为常量.</p>
<p>较传统的处理方式是给出所有可能的函数符号和关系符号. 即对任意元数 <span class="math inline">n</span>, 都有自然数多个函数符号</p>
<p><span class="math display">f^n_0,\ f^n_1,\ f^n_2,\ f^n_3,\ ...</span></p>
<p>以及自然数多个关系符号</p>
<p><span class="math display">R^n_0,\ R^n_1,\ R^n_2,\ R^n_3,\ ...</span></p>
<p>在这种处理下, 只有唯一一种一阶逻辑语言.</p>
<p>较现代的方式是根据最终要实现的一阶理论来指定该理论所需的非逻辑符号. 这些特定的符号以及它们的元数所组成的资料叫做理论的<strong>签名 (signature)</strong>. 在这种处理下, 每种签名都对应一种一阶逻辑语言 (在有些书中签名就叫做语言). 另外, 这些符号的实际所指, 所组成的资料叫做结构. 由于一阶逻辑的其他部分都是参数化到签名和结构上的, 我们把它们单独作为一个模块.</p>
<pre class="Agda"><a id="877" class="Symbol">{-#</a> <a id="881" class="Keyword">OPTIONS</a> <a id="889" class="Pragma">--cubical-compatible</a> <a id="910" class="Pragma">--safe</a> <a id="917" class="Symbol">#-}</a>

<a id="922" class="Keyword">module</a> <a id="929" href="FOL.Dependency.html" class="Module">FOL.Dependency</a> <a id="944" class="Keyword">where</a>

<a id="951" class="Keyword">open</a> <a id="956" class="Keyword">import</a> <a id="963" href="Level.html" class="Module">Level</a> <a id="969" class="Keyword">using</a> <a id="975" class="Symbol">(</a><a id="976" href="Agda.Primitive.html#774" class="Primitive">suc</a><a id="979" class="Symbol">)</a>
<a id="981" class="Keyword">open</a> <a id="986" class="Keyword">import</a> <a id="993" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="1002" class="Keyword">using</a> <a id="1008" class="Symbol">(</a><a id="1009" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="1010" class="Symbol">)</a>
<a id="1012" class="Keyword">open</a> <a id="1017" class="Keyword">import</a> <a id="1024" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="1033" class="Keyword">using</a> <a id="1039" class="Symbol">(</a><a id="1040" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a><a id="1043" class="Symbol">)</a>
</pre>
<h2 id="签名">签名</h2>
<p><strong>定义 (签名)</strong> 由按元数分类的函数符号集族 <code>functions : ℕ → Set u</code> 以及按元数分类的关系符号集族 <code>relations : ℕ → Set u</code> 组成的资料叫做签名. 其中 <code>u</code> 是宇宙多态参数. 签名比符号集高一个宇宙. 常量集是元数为 0 的函数集.</p>
<pre class="Agda"><a id="1211" class="Keyword">record</a> <a id="Signature"></a><a id="1218" href="FOL.Dependency.html#1218" class="Record">Signature</a> <a id="1228" class="Symbol">{</a><a id="1229" href="FOL.Dependency.html#1229" class="Bound">u</a><a id="1230" class="Symbol">}</a> <a id="1232" class="Symbol">:</a> <a id="1234" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1238" class="Symbol">(</a><a id="1239" href="Agda.Primitive.html#774" class="Primitive">suc</a> <a id="1243" href="FOL.Dependency.html#1229" class="Bound">u</a><a id="1244" class="Symbol">)</a> <a id="1246" class="Keyword">where</a>
  <a id="1254" class="Keyword">field</a>
    <a id="Signature.functions"></a><a id="1264" href="FOL.Dependency.html#1264" class="Field">functions</a> <a id="1274" class="Symbol">:</a> <a id="1276" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1278" class="Symbol">→</a> <a id="1280" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1284" href="FOL.Dependency.html#1229" class="Bound">u</a>
    <a id="Signature.relations"></a><a id="1290" href="FOL.Dependency.html#1290" class="Field">relations</a> <a id="1300" class="Symbol">:</a> <a id="1302" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1304" class="Symbol">→</a> <a id="1306" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1310" href="FOL.Dependency.html#1229" class="Bound">u</a>
  <a id="Signature.constants"></a><a id="1314" href="FOL.Dependency.html#1314" class="Function">constants</a> <a id="1324" class="Symbol">=</a> <a id="1326" href="FOL.Dependency.html#1264" class="Field">functions</a> <a id="1336" class="Number">0</a>
</pre>
<p><strong>例</strong> 下面给出了签名的一个实例, 它可以作为皮亚诺算术 (一种一阶理论) 的签名. 注意符号的元数被编码到了类型里面. 例如, 常量 <code>O</code> 的类型是 <code>func 0</code>, 后继函数 <code>S</code> 的类型是 <code>func 1</code>, 加法 <code>+</code> 以及乘法 <code>*</code> 的类型是 <code>func 2</code>, 小于关系 <code>&lt;</code> 的类型是 <code>rel 2</code>.</p>
<pre class="Agda"><a id="1519" class="Keyword">module</a> <a id="ExampleSignaturePA"></a><a id="1526" href="FOL.Dependency.html#1526" class="Module">ExampleSignaturePA</a> <a id="1545" class="Keyword">where</a>

  <a id="1554" class="Keyword">data</a> <a id="ExampleSignaturePA.func"></a><a id="1559" href="FOL.Dependency.html#1559" class="Datatype">func</a> <a id="1564" class="Symbol">:</a> <a id="1566" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1568" class="Symbol">→</a> <a id="1570" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1574" class="Keyword">where</a>
    <a id="ExampleSignaturePA.func.O"></a><a id="1584" href="FOL.Dependency.html#1584" class="InductiveConstructor">O</a> <a id="1586" class="Symbol">:</a> <a id="1588" href="FOL.Dependency.html#1559" class="Datatype">func</a> <a id="1593" class="Number">0</a>
    <a id="ExampleSignaturePA.func.S"></a><a id="1599" href="FOL.Dependency.html#1599" class="InductiveConstructor">S</a> <a id="1601" class="Symbol">:</a> <a id="1603" href="FOL.Dependency.html#1559" class="Datatype">func</a> <a id="1608" class="Number">1</a>
    <a id="ExampleSignaturePA.func.+"></a><a id="1614" href="FOL.Dependency.html#1614" class="InductiveConstructor">+</a> <a id="1616" class="Symbol">:</a> <a id="1618" href="FOL.Dependency.html#1559" class="Datatype">func</a> <a id="1623" class="Number">2</a>
    <a id="ExampleSignaturePA.func.*"></a><a id="1629" href="FOL.Dependency.html#1629" class="InductiveConstructor">*</a> <a id="1631" class="Symbol">:</a> <a id="1633" href="FOL.Dependency.html#1559" class="Datatype">func</a> <a id="1638" class="Number">2</a>

  <a id="1643" class="Keyword">data</a> <a id="ExampleSignaturePA.rel"></a><a id="1648" href="FOL.Dependency.html#1648" class="Datatype">rel</a> <a id="1652" class="Symbol">:</a> <a id="1654" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1656" class="Symbol">→</a> <a id="1658" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1662" class="Keyword">where</a>
    <a id="ExampleSignaturePA.rel.&lt;"></a><a id="1672" href="FOL.Dependency.html#1672" class="InductiveConstructor">&lt;</a> <a id="1674" class="Symbol">:</a> <a id="1676" href="FOL.Dependency.html#1648" class="Datatype">rel</a> <a id="1680" class="Number">2</a>

  <a id="ExampleSignaturePA.σ"></a><a id="1685" href="FOL.Dependency.html#1685" class="Function">σ</a> <a id="1687" class="Symbol">:</a> <a id="1689" href="FOL.Dependency.html#1218" class="Record">Signature</a>
  <a id="1701" href="FOL.Dependency.html#1685" class="Function">σ</a> <a id="1703" class="Symbol">=</a> <a id="1705" class="Keyword">record</a>
    <a id="1716" class="Symbol">{</a> <a id="1718" href="FOL.Dependency.html#1264" class="Field">functions</a> <a id="1728" class="Symbol">=</a> <a id="1730" href="FOL.Dependency.html#1559" class="Datatype">func</a>
    <a id="1739" class="Symbol">;</a> <a id="1741" href="FOL.Dependency.html#1290" class="Field">relations</a> <a id="1751" class="Symbol">=</a> <a id="1753" href="FOL.Dependency.html#1648" class="Datatype">rel</a>
    <a id="1761" class="Symbol">}</a>
</pre>
<h2 id="结构">结构</h2>
<p>函数符号和关系符号的实际所指所组成的资料叫做结构. 它由一个集合 <code>carrier</code> (也可以叫做论域) 以及两个映射 <code>funmap</code> 和 <code>relmap</code> 组成. 其中 <code>funmap</code> 用于映射函数符号到元函数, <code>relmap</code> 用于映射关系符号到元关系. 注意函数和关系的n元参数编码为n维向量.</p>
<pre class="Agda"><a id="1938" class="Keyword">open</a> <a id="1943" href="FOL.Dependency.html#1218" class="Module">Signature</a>

<a id="1954" class="Keyword">record</a> <a id="Structure"></a><a id="1961" href="FOL.Dependency.html#1961" class="Record">Structure</a> <a id="1971" class="Symbol">{</a><a id="1972" href="FOL.Dependency.html#1972" class="Bound">u</a><a id="1973" class="Symbol">}</a> <a id="1975" class="Symbol">{</a><a id="1976" href="FOL.Dependency.html#1976" class="Bound">σ</a> <a id="1978" class="Symbol">:</a> <a id="1980" href="FOL.Dependency.html#1218" class="Record">Signature</a> <a id="1990" class="Symbol">{</a><a id="1991" href="FOL.Dependency.html#1972" class="Bound">u</a><a id="1992" class="Symbol">}}</a> <a id="1995" class="Symbol">:</a> <a id="1997" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2001" class="Symbol">(</a><a id="2002" href="Agda.Primitive.html#774" class="Primitive">suc</a> <a id="2006" href="FOL.Dependency.html#1972" class="Bound">u</a><a id="2007" class="Symbol">)</a> <a id="2009" class="Keyword">where</a>
  <a id="2017" class="Keyword">field</a>
    <a id="Structure.carrier"></a><a id="2027" href="FOL.Dependency.html#2027" class="Field">carrier</a> <a id="2035" class="Symbol">:</a> <a id="2037" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2041" href="FOL.Dependency.html#1972" class="Bound">u</a>
    <a id="Structure.funmap"></a><a id="2047" href="FOL.Dependency.html#2047" class="Field">funmap</a> <a id="2054" class="Symbol">:</a> <a id="2056" class="Symbol">∀</a> <a id="2058" class="Symbol">{</a><a id="2059" href="FOL.Dependency.html#2059" class="Bound">n</a><a id="2060" class="Symbol">}</a> <a id="2062" class="Symbol">→</a> <a id="2064" href="FOL.Dependency.html#1976" class="Bound">σ</a> <a id="2066" class="Symbol">.</a><a id="2067" href="FOL.Dependency.html#1264" class="Field">functions</a> <a id="2077" href="FOL.Dependency.html#2059" class="Bound">n</a> <a id="2079" class="Symbol">→</a> <a id="2081" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="2085" href="FOL.Dependency.html#2027" class="Field">carrier</a> <a id="2093" href="FOL.Dependency.html#2059" class="Bound">n</a> <a id="2095" class="Symbol">→</a> <a id="2097" href="FOL.Dependency.html#2027" class="Field">carrier</a>
    <a id="Structure.relmap"></a><a id="2109" href="FOL.Dependency.html#2109" class="Field">relmap</a> <a id="2116" class="Symbol">:</a> <a id="2118" class="Symbol">∀</a> <a id="2120" class="Symbol">{</a><a id="2121" href="FOL.Dependency.html#2121" class="Bound">n</a><a id="2122" class="Symbol">}</a> <a id="2124" class="Symbol">→</a> <a id="2126" href="FOL.Dependency.html#1976" class="Bound">σ</a> <a id="2128" class="Symbol">.</a><a id="2129" href="FOL.Dependency.html#1290" class="Field">relations</a> <a id="2139" href="FOL.Dependency.html#2121" class="Bound">n</a> <a id="2141" class="Symbol">→</a> <a id="2143" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="2147" href="FOL.Dependency.html#2027" class="Field">carrier</a> <a id="2155" href="FOL.Dependency.html#2121" class="Bound">n</a> <a id="2157" class="Symbol">→</a> <a id="2159" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2163" href="FOL.Dependency.html#1972" class="Bound">u</a>
</pre>
</main>

<script>
;(function() {
  // Non-essential if user has JavaScript off. Just makes checkboxes look nicer.
  var selector = '.task-list > li > input[type="checkbox"]';
  var checkboxes = document.querySelectorAll(selector);
  Array.from(checkboxes).forEach((checkbox) => {
    var wasChecked = checkbox.checked;
    checkbox.disabled = false;
    checkbox.addEventListener('click', (ev) => {ev.target.checked = wasChecked});
  });
})();
</script>
</body>
</html>
